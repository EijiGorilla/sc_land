"use strict";(self.webpackChunksc_land=self.webpackChunksc_land||[]).push([[89623],{89623:(t,e,n)=>{n.d(e,{Z:()=>F});var r=n(27366),o=n(7138),i=n(10064),a=n(93169),s=n(66978),u=n(35995),l=n(49861),c=(n(32718),n(84936),n(69912)),d=n(18277),f=n(64020),h=n(23084),y=n(34211),p=(n(59486),n(5192)),m=n(21149),_=n(53866);var S=n(24246),b=n(77946),g=n(90851),x=n(49818);let v=class extends o.Z{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,u.mN)(this.url)}async execute(t,e){const n=await this.executeJSON(t,e);return this.featureSetFromJSON(t,n,e)}async executeJSON(t,e){var n;const r=this._normalizeQuery(t),o=null!=(null===(n=t.outStatistics)||void 0===n?void 0:n[0]),i=(0,a.Z)("featurelayer-pbf-statistics"),s=!o||i;let u;if(this.pbfSupported&&s)try{u=await(0,g.t)(this.url,r,e)}catch(l){if("query:parsing-pbf"!==l.name)throw l;this.pbfSupported=!1}return this.pbfSupported&&s||(u=await(0,b.F)(this.url,r,e)),this._normalizeFields(u.fields),u}async featureSetFromJSON(t,e,r){if(!this._queryIs3DObjectFormat(t)||null==this.infoFor3D||!e.features)return x.Z.fromJSON(e);const{meshFeatureSetFromJSON:o}=await(0,s.Hl)(Promise.all([n.e(69626),n.e(75367)]).then(n.bind(n,75367)),r);return o(t,this.infoFor3D,e)}executeForCount(t,e){return(0,y.P)(this.url,this._normalizeQuery(t),e)}executeForExtent(t,e){return async function(t,e,n){const r=(0,h.en)(t),o=await(0,p.Vr)(r,m.Z.from(e),{...n}),i=o.data.extent;return!i||isNaN(i.xmin)||isNaN(i.ymin)||isNaN(i.xmax)||isNaN(i.ymax)?{count:o.data.count,extent:null}:{count:o.data.count,extent:_.Z.fromJSON(i)}}(this.url,this._normalizeQuery(t),e)}executeForIds(t,e){return(0,S.G)(this.url,this._normalizeQuery(t),e)}async executeRelationshipQuery(t,e){const[{default:r},{executeRelationshipQuery:o}]=await(0,s.Hl)(Promise.all([Promise.resolve().then(n.bind(n,99086)),n.e(12964).then(n.bind(n,12964))]),e);return t=r.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),o(this.url,t,e)}async executeRelationshipQueryForCount(t,e){const[{default:r},{executeRelationshipQueryForCount:o}]=await(0,s.Hl)(Promise.all([Promise.resolve().then(n.bind(n,99086)),n.e(12964).then(n.bind(n,12964))]),e);return t=r.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),o(this.url,t,e)}async executeAttachmentQuery(t,e){const{executeAttachmentQuery:r,fetchAttachments:o,processAttachmentQueryResult:i}=await(0,s.Hl)(n.e(59301).then(n.bind(n,59301)),e),a=(0,h.en)(this.url);return i(a,await(this.queryAttachmentsSupported?r(a,t,e):o(a,t,e)))}async executeTopFeaturesQuery(t,e){const{executeTopFeaturesQuery:r}=await(0,s.Hl)(n.e(82200).then(n.bind(n,82200)),e);return r(this.parsedUrl,t,this.sourceSpatialReference,e)}async executeForTopIds(t,e){const{executeForTopIds:r}=await(0,s.Hl)(n.e(75182).then(n.bind(n,75182)),e);return r(this.parsedUrl,t,e)}async executeForTopExtents(t,e){const{executeForTopExtents:r}=await(0,s.Hl)(n.e(55641).then(n.bind(n,55641)),e);return r(this.parsedUrl,t,e)}async executeForTopCount(t,e){const{executeForTopCount:r}=await(0,s.Hl)(n.e(19406).then(n.bind(n,19406)),e);return r(this.parsedUrl,t,e)}_normalizeQuery(t){let e=m.Z.from(t);e.sourceSpatialReference=e.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(e=e===t?e.clone():e,e.gdbVersion=t.gdbVersion||this.gdbVersion,e.dynamicDataSource=t.dynamicDataSource?f.n.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:n}=this;if(null!=n&&this._queryIs3DObjectFormat(t)){var r,o;e=e===t?e.clone():e,e.formatOf3DObjects=null;const{supportedFormats:a,queryFormats:s}=n,u=null!==(r=(0,d.S0)("model/gltf-binary",a))&&void 0!==r?r:(0,d.Ow)("glb",a),l=null!==(o=(0,d.S0)("model/gltf+json",a))&&void 0!==o?o:(0,d.Ow)("gltf",a);for(const t of s){if(t===u){e.formatOf3DObjects=t;break}t!==l||e.formatOf3DObjects||(e.formatOf3DObjects=t)}if(!e.formatOf3DObjects)throw new i.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(null==e.outFields||!e.outFields.includes("*")){e=e===t?e.clone():e,null==e.outFields&&(e.outFields=[]);const{originX:r,originY:o,originZ:i,translationX:a,translationY:s,translationZ:u,scaleX:l,scaleY:c,scaleZ:d,rotationX:f,rotationY:h,rotationZ:y,rotationDeg:p}=n.transformFieldRoles;e.outFields.push(r,o,i,a,s,u,l,c,d,f,h,y,p)}}return e}_normalizeFields(t){if(null!=this.fieldsIndex&&null!=t)for(const e of t){const t=this.fieldsIndex.get(e.name);t&&Object.assign(e,t.toJSON())}}_queryIs3DObjectFormat(t){return null!=this.infoFor3D&&!0===t.returnGeometry&&"xyFootprint"!==t.multipatchOption&&!t.outStatistics}};(0,r._)([(0,l.Cb)({type:f.n})],v.prototype,"dynamicDataSource",void 0),(0,r._)([(0,l.Cb)()],v.prototype,"fieldsIndex",void 0),(0,r._)([(0,l.Cb)()],v.prototype,"gdbVersion",void 0),(0,r._)([(0,l.Cb)()],v.prototype,"infoFor3D",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],v.prototype,"parsedUrl",null),(0,r._)([(0,l.Cb)()],v.prototype,"pbfSupported",void 0),(0,r._)([(0,l.Cb)()],v.prototype,"queryAttachmentsSupported",void 0),(0,r._)([(0,l.Cb)()],v.prototype,"sourceSpatialReference",void 0),(0,r._)([(0,l.Cb)({type:String})],v.prototype,"url",void 0),v=(0,r._)([(0,c.j)("esri.tasks.QueryTask")],v);const F=v},18277:(t,e,n)=>{n.d(e,{$6:()=>p,$z:()=>i,F7:()=>o,Ow:()=>s,S0:()=>a,d1:()=>u,dm:()=>l});const r=[["binary","application/octet-stream","bin",""]];function o(t,e){var n;return null!=d(e.name,null!==(n=null===t||void 0===t?void 0:t.supportedFormats)&&void 0!==n?n:[])}function i(t,e){var n;if(!t)return!1;const r=l(e,null!==(n=t.supportedFormats)&&void 0!==n?n:[]);return null!=r&&t.editFormats.includes(r)}function a(t,e){return f(function(t,e){const n=t.toLowerCase();return c(e).find((t=>h(t)===n))}(t,e))}function s(t,e){return f(d(t,e))}function u(t,e){return h(function(t,e){return c(e).find((e=>f(e)===t))}(t,e))}function l(t,e){var n;return null!==(n=s(t.name,e))&&void 0!==n?n:a(t.type,e)}function c(t){return[...r,...t]}function d(t,e){const n=t.toLowerCase();return c(e).find((t=>y(t).some((t=>n.endsWith(t)))))}function f(t){return null===t||void 0===t?void 0:t[0]}function h(t){return null===t||void 0===t?void 0:t[1].toLowerCase()}function y(t){var e;return null!==(e=null===t||void 0===t?void 0:t[2].split(",").map((t=>t.toLowerCase())))&&void 0!==e?e:[]}function p(t){var e;return null===(e=t.tables)||void 0===e?void 0:e.find((t=>"assetMaps"===t.role))}},22585:(t,e,n)=>{function r(t){const e={};for(const n in t){if("declaredClass"===n)continue;const o=t[n];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){e[n]=[];for(let t=0;t<o.length;t++)e[n][t]=r(o[t])}else"object"==typeof o?o.toJSON&&(e[n]=JSON.stringify(o)):e[n]=o}return e}n.d(e,{A:()=>r})},34211:(t,e,n)=>{n.d(e,{P:()=>a});var r=n(23084),o=n(5192),i=n(21149);async function a(t,e,n){const a=(0,r.en)(t);return(0,o.hH)(a,i.Z.from(e),{...n}).then((t=>t.data.count))}},24246:(t,e,n)=>{n.d(e,{G:()=>a});var r=n(23084),o=n(5192),i=n(21149);async function a(t,e,n){const a=(0,r.en)(t);return(0,o.Ev)(a,i.Z.from(e),{...n}).then((t=>t.data.objectIds))}},77946:(t,e,n)=>{n.d(e,{F:()=>u,e:()=>s});var r=n(23084),o=n(5192),i=n(49818),a=n(21149);async function s(t,e,n){const r=await u(t,e,n);return i.Z.fromJSON(r)}async function u(t,e,n){const i=(0,r.en)(t),s={...n},u=a.Z.from(e),{data:l}=await(0,o.JT)(i,u,u.sourceSpatialReference,s);return l}},90851:(t,e,n)=>{n.d(e,{t:()=>m});var r=n(23084),o=n(92026),i=n(93501),a=n(83406);function s(t,e){return e}function u(t,e,n,r){switch(n){case 0:return f(t,e+r,0);case 1:return"lowerLeft"===t.originPosition?f(t,e+r,1):function(t,e,n){let{translate:r,scale:o}=t;return r[n]-e*o[n]}(t,e+r,1)}}function l(t,e,n,r){return 2===n?f(t,e,2):u(t,e,n,r)}function c(t,e,n,r){return 2===n?0===e?0:f(t,e,3):u(t,e,n,r)}function d(t,e,n,r){return 3===n?0===e?0:f(t,e,3):l(t,e,n,r)}function f(t,e,n){let{translate:r,scale:o}=t;return r[n]+e*o[n]}class h{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=s,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const e=(0,i.k)(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(null!=e)for(const n of t.features)e(n.geometry)}createSpatialReference(){return{}}addField(t,e){const n=t.fields;(0,o.O3)(n),n.push(e);const r=n.map((t=>t.name));this._attributesConstructor=function(){for(const t of r)this[t]=null}}addFeature(t,e){t.features.push(e)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._mValueOffset=null,this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),t.geometryType){case"esriGeometryPoint":this.addCoordinate=(t,e,n)=>this.addCoordinatePoint(t,e,n),this.createGeometry=t=>this.createPointGeometry(t);break;case"esriGeometryPolygon":this.addCoordinate=(t,e,n)=>this._addCoordinatePolygon(t,e,n),this.createGeometry=t=>this._createPolygonGeometry(t);break;case"esriGeometryPolyline":this.addCoordinate=(t,e,n)=>this._addCoordinatePolyline(t,e,n),this.createGeometry=t=>this._createPolylineGeometry(t);break;case"esriGeometryMultipoint":this.addCoordinate=(t,e,n)=>this._addCoordinateMultipoint(t,e,n),this.createGeometry=t=>this._createMultipointGeometry(t)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,e,n){0===this._lengths.length&&(this._toAddInCurrentPath=e),this._lengths.push(e)}addQueryGeometry(t,e){const{queryGeometry:n,queryGeometryType:r}=e,o=(0,a.$g)(n.clone(),n,!1,!1,this._transform),i=(0,a.di)(o,r,!1,!1);t.queryGeometryType=r,t.queryGeometry={...i}}createPointGeometry(t){const e={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(e.z=0),t.hasM&&(e.m=0),e}addCoordinatePoint(t,e,n){const r=this._transform;switch(e=this._applyTransform(r,e,n,0),n){case 0:t.x=e;break;case 1:t.y=e;break;case 2:"z"in t?t.z=e:t.m=e;break;case 3:t.m=e}}_transformPathLikeValue(t,e){let n=0;e<=1&&(n=this._previousCoordinate[e],this._previousCoordinate[e]+=t);const r=this._transform;return null===this._mValueOffset||0!==t||e%this._mValueOffset?this._applyTransform(r,t,e,n):0}_addCoordinatePolyline(t,e,n){this._dehydratedAddPointsCoordinate(t.paths,e,n)}_addCoordinatePolygon(t,e,n){this._dehydratedAddPointsCoordinate(t.rings,e,n)}_addCoordinateMultipoint(t,e,n){0===n&&t.points.push([]);const r=this._transformPathLikeValue(e,n);t.points[t.points.length-1].push(r)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,e,n){0===n&&0==this._toAddInCurrentPath--&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const r=this._transformPathLikeValue(e,n),o=t[t.length-1];0===n&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=r}_deriveApplyTransform(t){const{hasZ:e,hasM:n}=t;return e&&n?d:e?l:n?c:u}}var y=n(5192),p=(n(49818),n(21149));async function m(t,e,n){const o=(0,r.en)(t),i={...n},a=p.Z.from(e),s=!a.quantizationParameters,{data:u}=await(0,y.qp)(o,a,new h({sourceSpatialReference:a.sourceSpatialReference,applyTransform:s}),i);return u}},5192:(t,e,n)=>{n.d(e,{Ev:()=>m,JT:()=>h,Vn:()=>b,Vr:()=>S,hH:()=>_,n7:()=>p,qp:()=>y});var r=n(76200),o=n(35995),i=n(77981),a=n(91340),s=n(92975),u=n(22585),l=n(27607),c=n(68620);const d="Layer does not support extent calculation.";function f(t,e){var n;const r=t.geometry,o=t.toJSON();delete o.compactGeometryEnabled,delete o.defaultSpatialReferenceEnabled;const a=o;let u,l,c;if(null!=r&&(l=r.spatialReference,c=(0,s.B9)(l),a.geometryType=(0,i.Ji)(r),a.geometry=function(t,e){if(e&&"extent"===t.type)return"".concat(t.xmin,",").concat(t.ymin,",").concat(t.xmax,",").concat(t.ymax);if(e&&"point"===t.type)return"".concat(t.x,",").concat(t.y);const n=t.toJSON();return delete n.spatialReference,JSON.stringify(n)}(r,t.compactGeometryEnabled),a.inSR=c),o.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=o.groupByFieldsForStatistics.join(",")),o.objectIds&&(a.objectIds=o.objectIds.join(",")),o.orderByFields&&(a.orderByFields=o.orderByFields.join(",")),!o.outFields||!o.returnDistinctValues&&(null!==e&&void 0!==e&&e.returnCountOnly||null!==e&&void 0!==e&&e.returnExtentOnly||null!==e&&void 0!==e&&e.returnIdsOnly)?delete a.outFields:o.outFields.includes("*")?a.outFields="*":a.outFields=o.outFields.join(","),o.outSR?(a.outSR=(0,s.B9)(o.outSR),u=t.outSpatialReference):r&&(o.returnGeometry||o.returnCentroid)&&(a.outSR=a.inSR,u=l),o.returnGeometry&&delete o.returnGeometry,o.outStatistics&&(a.outStatistics=JSON.stringify(o.outStatistics)),o.fullText&&(a.fullText=JSON.stringify(o.fullText)),o.pixelSize&&(a.pixelSize=JSON.stringify(o.pixelSize)),o.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&null!=l&&null!=(null===(n=t.quantizationParameters)||void 0===n?void 0:n.extent)&&l.equals(t.quantizationParameters.extent.spatialReference)&&delete o.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(o.quantizationParameters)),o.parameterValues&&(a.parameterValues=JSON.stringify(o.parameterValues)),o.rangeValues&&(a.rangeValues=JSON.stringify(o.rangeValues)),o.dynamicDataSource&&(a.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o.timeExtent){const t=o.timeExtent,{start:e,end:n}=t;null==e&&null==n||(a.time=e===n?e:"".concat(null!==e&&void 0!==e?e:"null",",").concat(null!==n&&void 0!==n?n:"null")),delete o.timeExtent}return t.defaultSpatialReferenceEnabled&&null!=l&&null!=u&&l.equals(u)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}async function h(t,e,n,r){const o=null!=e.timeExtent&&e.timeExtent.isEmpty?{data:{features:[]}}:await b(t,e,"json",r);return(0,c.p)(e,n,o.data),o}async function y(t,e,n,r){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:n.createFeatureResult()};const o=await p(t,e,r),i=o;return i.data=(0,l.C)(o.data,n),i}function p(t,e,n){return b(t,e,"pbf",n)}function m(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):b(t,e,"json",n,{returnIdsOnly:!0})}function _(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):b(t,e,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}async function S(t,e,n){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await b(t,e,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}),o=r.data;if(o.hasOwnProperty("extent"))return r;if(o.features)throw new Error(d);if(o.hasOwnProperty("count"))throw new Error(d);return r}async function b(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const l="string"==typeof t?(0,o.mN)(t):t,c=e.geometry?[e.geometry]:[],d=await(0,a.aX)(c,null,{signal:i.signal}),h=null===d||void 0===d?void 0:d[0];null!=h&&((e=e.clone()).geometry=h);const y=(0,u.A)({...l.query,f:n,...s,...f(e,s)});return(0,r.Z)((0,o.v_)(l.path,(p=s,null==e.formatOf3DObjects||p.returnCountOnly||p.returnExtentOnly||p.returnIdsOnly?"query":"query3d")),{...i,responseType:"pbf"===n?"array-buffer":"json",query:{...y,...i.query}});var p}}}]);
//# sourceMappingURL=89623.59098e9a.chunk.js.map