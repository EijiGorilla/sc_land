"use strict";(self.webpackChunksc_land=self.webpackChunksc_land||[]).push([[75367],{75367:(e,t,r)=>{r.r(t),r.d(t,{assetMapFromAssetMapsJSON:()=>S,extractMesh:()=>g,meshFeatureSetFromJSON:()=>d});var n=r(52639),s=r(32718),a=r(77427),o=r(53866),u=r(69626),i=r(585),l=r(78952),c=r(76046),f=r(17493),p=r(18277),m=r(49818);const h=()=>s.Z.getLogger("esri.rest.support.meshFeatureSet");function d(e,t,r){var s;const a=r.features;r.features=[],delete r.geometryType;const o=m.Z.fromJSON(r);if(o.geometryType="mesh",!r.assetMaps)return o;const u=S(t,r.assetMaps),i=null!==(s=e.sourceSpatialReference)&&void 0!==s?s:l.Z.WGS84,c=r.globalIdFieldName,{outFields:f}=e,p=null!=f&&f.length>0?(h=f.includes("*")?null:new Set(f),e=>{let{attributes:t}=e;if(!t)return{};if(!h)return t;for(const r in t)h.has(r)||delete t[r];return t}):()=>({});var h;for(const l of a){const e=g(l,c,i,t,u);null!=e&&o.features.push(new n.Z({geometry:e,attributes:p(l)}))}return o}function g(e,t,r,n,s){const a=e.attributes[t],l=s.get(a);if(null==l)return h().error("mesh-feature-set:asset-not-found","Service returned a feature which was not found in the asset map",e),null;if(!e.geometry)return h().error("mesh-feature-set:no-geometry","Service returned a feature without geometry",e),null;const p=function(e,t,r){let{attributes:n}=e,{transformFieldRoles:s}=r;const a=n[s.originX],o=n[s.originY],u=n[s.originZ];return new i.Z({x:a,y:o,z:u,spatialReference:t})}(e,r,n),m=o.Z.fromJSON(e.geometry);m.spatialReference=r;const d=function(e,t){let{transformFieldRoles:r}=t;return new c.Z({translation:[e[r.translationX],-e[r.translationZ],e[r.translationY]],rotationAxis:[e[r.rotationX],-e[r.rotationZ],e[r.rotationY]],rotationAngle:e[r.rotationDeg],scale:[e[r.scaleX],e[r.scaleZ],e[r.scaleY]]})}(e.attributes,n),g=r.isGeographic?"local":"georeferenced",E=function(e){const t=Array.from(e.files.values()),r=new Array;for(const n of t){if(n.status!==y.COMPLETED)return null;const e=new Array;for(const t of n.parts){if(!t)return null;e.push(new f.LL(t.url,t.hash))}r.push(new f.CP(n.name,n.mimeType,e))}return r}(l);return E?u.Z.createWithExternalSource(p,E,{extent:m,transform:d,vertexSpace:g}):u.Z.createIncomplete(p,{extent:m,transform:d,vertexSpace:g})}var y,E;function S(e,t){const r=new Map;for(const n of t){const t=n.parentGlobalId;if(null==t)continue;const s=n.assetName,o=n.assetType,u=n.assetHash,i=n.assetURL,l=n.conversionStatus,c=n.seqNo,f=(0,p.d1)(o,e.supportedFormats);if(!f){h().error("mesh-feature-set:unknown-format","Service returned an asset of type ".concat(o,", but it does not list it as a supported type"));continue}const m=(0,a.s1)(r,t,(()=>({files:new Map})));(0,a.s1)(m.files,s,(()=>({name:s,type:o,mimeType:f,status:w(l),parts:[]}))).parts[c]={hash:u,url:i}}return r}function w(e){switch(e){case"COMPLETED":case"SUBMITTED":return y.COMPLETED;case"INPROGRESS":return y.PENDING;default:return y.FAILED}}(E=y||(y={}))[E.FAILED=0]="FAILED",E[E.PENDING=1]="PENDING",E[E.COMPLETED=2]="COMPLETED"}}]);
//# sourceMappingURL=75367.bcca6251.chunk.js.map