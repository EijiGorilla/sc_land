"use strict";(self.webpackChunksc_land=self.webpackChunksc_land||[]).push([[6935],{36935:(e,t,l)=>{l.r(t),l.d(t,{default:()=>k});var a=l(72791),i=l(28979),r=l(53970),n=l(18661),s=l(21149),o=l(36801),c=l(59181),u=l(66817),d=l(97304),f=l(70565),h=l(56343),v=l(54797),m=l(27663),g=l(82308),p=l(80659),x=l(91934),w=l(44520),y=l(85580),b=l(26877),A=l(70821),T=l(80184);const k=(0,a.memo)((()=>{const{municipality:e,barangays:t}=(0,A.tv)(),l=null===e?void 0:e.field1,k=null===t?void 0:t.name,L=(0,a.useRef)({}),R=(0,a.useRef)({}),S=(0,a.useRef)({}),[N,E]=(0,a.useState)([{category:String,value:Number,sliceSettings:{fill:u.$_("#00c5ff")}}]),[_,j]=(0,a.useState)(0),O="nlo-chart",B=`${b.Hg} = '`+l+"'",I=B+" AND "+(`${b.TR} = '`+k+"'");return i.vx.definitionExpression=l?l&&!k?B:I:"1=1",(0,a.useEffect)((()=>{(0,w.nf)(l,k).then((e=>{E(e)})),(0,w.wU)().then((e=>{j(e)}))}),[l,k]),(0,a.useEffect)((()=>{var e,t;t=O,o.S6(c.i_.rootElements,(function(e){e.dom.id===t&&e.dispose()}));var l=d.f.new(O);l.container.children.clear(),null===(e=l._logo)||void 0===e||e.dispose(),l.setThemes([p.Z.new(l),x.Z.new(l)]);var a=l.container.children.push(m.u.new(l,{layout:l.verticalLayout}));S.current=a;var w=a.series.push(g.f.new(l,{name:"Series",categoryField:"category",valueField:"value",legendValueText:"{valuePercentTotal.formatNumber('#.')}% ({value})",radius:f.aQ(45),innerRadius:f.aQ(28),scale:2.1}));L.current=w,a.series.push(w);let y=w.children.push(h._.new(l,{text:"[#ffffff]{valueSum}[/]\n[fontSize: 5px; #d3d3d3; verticalAlign: super]FAMILIES[/]",fontSize:18,centerX:f.aQ(50),centerY:f.aQ(40),populateText:!0,oversizedBehavior:"fit",textAlign:"center"}));w.onPrivate("width",(e=>{y.set("maxWidth",.7*e)})),w.slices.template.setAll({toggleKey:"none",fillOpacity:.9,stroke:u.$_("#ffffff"),strokeWidth:.5,strokeOpacity:1,templateField:"sliceSettings"}),w.labels.template.set("visible",!1),w.ticks.template.set("visible",!1),w.slices.template.events.on("click",(e=>{var t;const l=(null===(t=e.target.dataItem)||void 0===t?void 0:t.dataContext).category,a=b.Nc.find((e=>e.category===l)),o=null===a||void 0===a?void 0:a.value;var c,u=i.vx.createQuery();r.ei.when((function(){r.ei.whenLayerView(i.vx).then((e=>{i.vx.queryFeatures(u).then((function(t){const l=t.features.length;let a=[];for(var o=0;o<l;o++){var u=t.features[o].attributes.OBJECTID;a.push(u)}var d=new s.Z({objectIds:a});i.vx.queryExtent(d).then((function(e){e.extent&&r.ei.goTo(e.extent)})),c&&c.remove(),c=e.highlight(a),r.ei.on("click",(function(){e.filter=new n.Z({where:void 0}),c.remove()}))})),e.filter=new n.Z({where:b.D6+" = "+o})}))}))})),w.data.setAll(N);var A=a.children.push(v.D.new(l,{centerX:f.aQ(50),x:f.aQ(50),scale:.9}));R.current=A,A.data.setAll(w.dataItems),A.markers.template.setAll({width:18,height:18}),A.markerRectangles.template.setAll({cornerRadiusTL:10,cornerRadiusTR:10,cornerRadiusBL:10,cornerRadiusBR:10}),a.onPrivate("width",(function(e){var t=Math.max(e-a.height()-230,230);A.labels.template.setAll({width:t,maxWidth:t})}));return A.labels.template.setAll({oversizedBehavior:"truncate",fill:u.$_("#ffffff")}),A.valueLabels.template.setAll({textAlign:"right",width:50,fill:u.$_("#ffffff")}),A.itemContainers.template.setAll({paddingTop:3,paddingBottom:1}),w.appear(1e3,100),()=>{l.dispose()}}),[O,N]),(0,a.useEffect)((()=>{var e,t;null===(e=L.current)||void 0===e||e.data.setAll(N),null===(t=R.current)||void 0===t||t.data.setAll(L.current.dataItems)})),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(y.ZK,{children:"TOTAL NON-LAND OWNERS"}),(0,T.jsx)(y.ZK,{layout:"inline",children:(0,T.jsxs)("b",{className:"permitToEnterNumber",style:{color:b.u8},children:[(0,w.oc)(_),(0,T.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/NLO_Logo.svg",alt:"NLO Logo",height:"55%",width:"55%",style:{marginLeft:"200%",display:"flex",marginTop:"-17%"}})]})}),(0,T.jsx)("div",{id:O,style:{height:"45vh",backgroundColor:"rgb(0,0,0,0)",color:"white",marginBottom:"-1.5vh"}})]})}))}}]);
//# sourceMappingURL=6935.945872b8.chunk.js.map