"use strict";(self.webpackChunksc_land=self.webpackChunksc_land||[]).push([[3583],{43583:(e,t,i)=>{i.r(t),i.d(t,{default:()=>R});var l=i(72791),r=i(28979),a=i(53970),s=i(18661),n=i(21149),o=i(36801),u=i(59181),c=i(66817),d=i(97304),h=i(70565),f=i(56343),m=i(54797),g=i(27663),v=i(82308),p=i(80659),y=i(91934),x=i(44520),b=i(85580),T=i(26877),w=i(70821),S=i(80184);const R=(0,l.memo)((()=>{const{municipality:e,barangays:t}=(0,w.tv)(),i=null===e?void 0:e.field1,R=null===t?void 0:t.name,E=(0,l.useRef)({}),j=(0,l.useRef)({}),A=(0,l.useRef)({}),[L,k]=(0,l.useState)([{category:String,value:Number,sliceSettings:{fill:c.$_("#00c5ff")}}]),C="structure-chart",[N,U]=(0,l.useState)([]),[_,Z]=((0,l.useRef)({}),(0,l.useRef)({}),(0,l.useRef)({}),(0,l.useState)([{category:String,value:Number}])),B=`${T.Hg} = '`+i+"'",Q=B+" AND "+(`${T.TR} = '`+R+"'");return r.UC.definitionExpression=i?i&&!R?B:Q:"1=1",(0,l.useEffect)((()=>{(0,x.KD)(i,R).then((e=>{k(e)})),(0,x.fT)().then((e=>{U(e)})),(0,x.VV)(i,R).then((e=>{Z(e)}))}),[i,R]),(0,l.useEffect)((()=>{var e,t;t=C,o.S6(u.i_.rootElements,(function(e){e.dom.id===t&&e.dispose()}));var i=d.f.new(C);i.container.children.clear(),null===(e=i._logo)||void 0===e||e.dispose(),i.setThemes([p.Z.new(i),y.Z.new(i)]);var l=i.container.children.push(g.u.new(i,{layout:i.verticalLayout}));A.current=l;var x=l.series.push(v.f.new(i,{name:"Series",categoryField:"category",valueField:"value",legendValueText:"{valuePercentTotal.formatNumber('#.')}% ({value})",radius:h.aQ(45),innerRadius:h.aQ(28),scale:1.8}));E.current=x,l.series.push(x);let b=x.children.push(f._.new(i,{text:"[#ffffff]{valueSum}[/]\n[fontSize: 0.5em; #d3d3d3; verticalAlign: super]STRUCTURES[/]",fontSize:"1.2em",centerX:h.aQ(50),centerY:h.aQ(40),populateText:!0,oversizedBehavior:"fit",textAlign:"center"}));x.onPrivate("width",(e=>{b.set("maxWidth",.7*e)})),x.slices.template.setAll({fillOpacity:.9,stroke:c.$_("#ffffff"),strokeWidth:.5,strokeOpacity:1,templateField:"sliceSettings",toggleKey:"none"}),x.labels.template.set("visible",!1),x.ticks.template.set("visible",!1),x.slices.template.events.on("click",(e=>{var t;const i=(null===(t=e.target.dataItem)||void 0===t?void 0:t.dataContext).category,l=T.Gh.find((e=>e.category===i)),o=null===l||void 0===l?void 0:l.value;var u,c=r.UC.createQuery();a.ei.when((function(){a.ei.whenLayerView(r.UC).then((e=>{r.UC.queryFeatures(c).then((function(t){const i=t.features.length;let l=[];for(var o=0;o<i;o++){var c=t.features[o].attributes.OBJECTID;l.push(c)}var d=new n.Z({objectIds:l});r.UC.queryExtent(d).then((function(e){e.extent&&a.ei.goTo(e.extent)})),u&&u.remove(),u=e.highlight(l),a.ei.on("click",(function(){e.filter=new s.Z({where:void 0}),u.remove()}))})),e.filter=new s.Z({where:T.Us+" = "+o})}))}))})),x.data.setAll(L);var w=l.children.push(m.D.new(i,{centerX:h.aQ(50),x:h.aQ(50),scale:.9}));j.current=w,w.data.setAll(x.dataItems),w.markers.template.setAll({width:18,height:18}),w.markerRectangles.template.setAll({cornerRadiusTL:10,cornerRadiusTR:10,cornerRadiusBL:10,cornerRadiusBR:10}),l.onPrivate("width",(function(e){var t=Math.max(e-l.height()-220,220);w.labels.template.setAll({width:t,maxWidth:t})}));return w.labels.template.setAll({oversizedBehavior:"truncate",fill:c.$_("#ffffff")}),w.valueLabels.template.setAll({textAlign:"right",width:50,fill:c.$_("#ffffff")}),w.itemContainers.template.setAll({paddingTop:3,paddingBottom:1}),x.appear(1e3,100),()=>{i.dispose()}}),[C,L]),(0,l.useEffect)((()=>{var e,t;null===(e=E.current)||void 0===e||e.data.setAll(L),null===(t=j.current)||void 0===t||t.data.setAll(E.current.dataItems)})),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(b.ZK,{children:"TOTAL STRUCTURES"}),(0,S.jsx)(b.ZK,{layout:"inline",children:(0,S.jsxs)("b",{className:"totalLotsNumber",style:{color:T.u8},children:[(0,x.oc)(N[2]),(0,S.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/House_Logo.svg",alt:"Structure Logo",height:"30%",width:"30%",style:{marginLeft:"120%",display:"flex",marginTop:"-22%"}})]})}),(0,S.jsx)("div",{id:C,style:{height:"55vh",backgroundColor:"rgb(0,0,0,0)",color:"white",marginBottom:"7%"}}),(0,S.jsx)(b.ZK,{children:"PERMIT-TO-ENTER"}),(0,S.jsx)(b.ZK,{layout:"inline",children:0===N[1]?(0,S.jsxs)("b",{className:"permitToEnterNumber",style:{color:T.u8},children:[N[0],"% (0)",(0,S.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/Permit-To-Enter.png",alt:"Structure Logo",height:"18%",width:"18%",style:{marginLeft:"70%",display:"flex",marginTop:"-10%"}})]}):(0,S.jsxs)("b",{className:"permitToEnterNumber",style:{color:T.u8},children:[N[0],"% (",(0,x.oc)(N[1]),")",(0,S.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/Permit-To-Enter.png",alt:"Structure Logo",height:"18%",width:"18%",style:{marginLeft:"70%",display:"flex",marginTop:"-10%"}})]})})]})}))}}]);
//# sourceMappingURL=3583.c6b6f4b3.chunk.js.map