"use strict";(self.webpackChunksc_land=self.webpackChunksc_land||[]).push([[3093],{97942:(e,t,r)=>{function i(e){let t,r,i=[],n=!1;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n&&t===this&&function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}(a,i)||(r=e.apply(this,a),t=this,i=a,n=!0),r}}r.d(t,{H:()=>i})},79311:(e,t,r)=>{r.d(t,{_:()=>Q});var i=r(51995),n=r(86950),s=(r(93169),r(42537)),a=r(32035),o=r(12400),c=r(5986),l=r(74509),u=r(27601),d=r(97411),h=r(94172),p=r(17842),f=r(13611),_=r(6644),g=r(19093),m=r(86361),v=r(55946),O=r(19182),D=r(19265),y=r(70619),R=r(56529),w=r(39077),x=r(4760),P=r(58901);class S extends O.i{constructor(e){super(e),this._location=(0,o.Ue)(),this._direction=(0,o.al)(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=(0,m.al)(1,0,1,1),this._renderOccluded=R.yD.OccludeAndTransparent,this.applyProperties(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:G,recreateGeometry:(e,t)=>this._recreateObject3DGeometry(e,t),cameraChanged:()=>this._updateGeometry()}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:M,recreateGeometry:e=>this._recreateDrapedGeometry(e)}}get location(){return this._location}set location(e){(0,a.p)(this._location,e)||((0,a.c)(this._location,e),this._updateGeometry())}get direction(){return this._direction}set direction(e){(0,a.p)(this._direction,e)||((0,a.c)(this._direction,e),this._updateGeometry())}setDirectionFromPoints(e,t){(0,a.n)(this._direction,(0,a.d)(this._direction,t,e)),this._updateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get offset(){return this._offset}set offset(e){e!==this._offset&&(this._offset=e,this._updateGeometry())}get length(){return this._length}set length(e){e!==this._length&&(this._length=e,this._updateGeometry())}get color(){return this._color}set color(e){(0,g.a)(e,this._color)||((0,g.c)(this._color,e),this._updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}_createObject3DResources(e){const t=new P.U(this.materialParameters),r=new Array;return this._createObject3DGeometry(t,e,r),{material:t,geometries:r,forEach:e=>{e(t),r.forEach(e)}}}_recreateObject3DGeometry(e,t){e.geometries.length=0,this._createObject3DGeometry(e.material,t,e.geometries)}_createObject3DGeometry(e,t,r){const[i,n]=b(e);t.addGeometry(i),t.addGeometry(n),r.push(i),r.push(n),this._updateVerticesObject3D(t)}_createDrapedResources(){const e=new P.U(this.materialParameters),t=(0,h.YP)((()=>this.view.state.contentPixelRatio),(()=>{this.drapedResources.recreateGeometry()}));return{material:e,geometries:this._createDrapedGeometry(e),pixelRatioHandle:t}}_recreateDrapedGeometry(e){e.geometries=this._createDrapedGeometry(e.material)}_createDrapedGeometry(e){const t=b(e);return this._updateVerticesDraped(t),t.map((e=>new w.z(e)))}_updateMaterial(){const{materialParameters:e}=this;this.object3dResources.resources?.material.setParameters(e),this.drapedResources.resources?.material.setParameters(e)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateGeometry(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const e=this.object3dResources.object;e&&this._updateVerticesObject3D(e)}}_updateVerticesObject3D(e){const t=this.view.state.camera;t.projectToScreen(this.location,H),(0,a.g)(T,this.location,this.direction),t.projectToScreen(T,E),(0,f.Fv)(E,(0,f.$X)(E,E,H)),this._updateVertexAttributesObject3D(t,e,0,H,E,1),this._updateVertexAttributesObject3D(t,e,1,H,E,-1)}_updateVertexAttributesObject3D(e,t,r,i,n,s){const a=t.geometries[r],o=a.getMutableAttribute(x.T.POSITION)?.data;if(!o)return;const{start:c,end:l}=z(n,i,s,this.offset,this.width,this.length);e.unprojectFromScreen((0,p.c$)(c),T),o[0]=T[0],o[1]=T[1],o[2]=T[2],e.unprojectFromScreen((0,p.c$)(l),T),o[3]=T[0],o[4]=T[1],o[5]=T[2],t.geometryVertexAttributeUpdated(a,x.T.POSITION)}_updateVerticesDraped(e){const{view:{basemapTerrain:{overlayManager:t},state:{contentPixelRatio:r}}}=this,{location:i,width:n,length:s,offset:a}=this,o=U;o.spatialReference=t.renderer.spatialReference,o.x=i[0],o.y=i[1];const c=this.view.overlayPixelSizeInMapUnits(o)*r,l=n*c,u=s*c,d=a*c;this._updateVertexAttributesDraped(e[0],l,u,d,-1),this._updateVertexAttributesDraped(e[1],l,u,d,1)}_updateVertexAttributesDraped(e,t,r,i,n){const s=e.getMutableAttribute(x.T.POSITION)?.data;if(!s)return;const{location:a,direction:o}=this,{start:c,end:l}=z(o,a,n,i,t,r);s[0]=c[0],s[1]=c[1],s[2]=D.gi,s[3]=l[0],s[4]=l[1],s[5]=D.gi,e.invalidateBoundingInfo()}}function b(e){return[(0,y.rh)(e,[(0,o.Ue)(),(0,o.Ue)()]),(0,y.rh)(e,[(0,o.Ue)(),(0,o.Ue)()])]}function z(e,t,r,i,n,s){const a=(0,f.bA)(A,(0,f.t8)(A,e[1]*r,e[0]*-r),i+n/2),o=(0,f.IH)(C,(0,f.IH)(C,(0,f.IH)(C,t,(0,f.bA)(C,e,s/2)),a),a);return{start:o,end:(0,f.IH)(j,o,(0,f.bA)(j,e,-s))}}function G(e){e.geometries.length=0}function M(e){e.pixelRatioHandle.remove(),e.geometries=[]}const T=(0,o.Ue)(),A=(0,_.Ue)(),C=(0,_.Ue)(),j=(0,_.Ue)(),H=(0,p.s1)(),E=(0,p.s1)(),U=(0,v.T)(0,0,void 0,null);var I=r(66730),F=r(98917),Z=r(26279),q=r(38054),V=r(76014),k=r(80371),L=r(64674),N=r(38561),W=r(53397);class Q extends N.a{sortUniqueHints(e){return e.sort(((e,t)=>(t instanceof W.w?t.length:0)-(e instanceof W.w?e.length:0)))}visualizeIntersectionPoint(e,t){const{spatialReference:r,view:i}=t,n=B(t);return(0,s.ed)(new I.L({view:i,primitive:"circle",geometry:(0,q.Ju)(e.intersectionPoint,r),elevationInfo:e.isDraped?l.tR:l.jG,size:20,outlineSize:2,color:n.intersectionPointColor,outlineColor:n.intersectionPointOutlineColor,pixelSnappingEnabled:!1,isDecoration:!0,attached:!0}))}visualizePoint(e,t){const{view:r,spatialReference:i}=t,n=B(t),a=Y(e.point,e.domain,t);return(0,s.ed)(new I.L({view:r,primitive:"circle",geometry:(0,q.Ju)(a,i),elevationInfo:$(e),size:20,outlineSize:2,color:n.pointColor,outlineColor:n.pointOutlineColor,pixelSnappingEnabled:!1,isDecoration:!0,attached:!0}))}visualizeLine(e,t){const{view:r,spatialReference:i}=t,n=B(t),a=Y(e.lineStart,e.domain,t),o=Y(e.lineEnd,e.domain,t);return(0,s.ed)(function(e,t,r,i,n,s,a){let o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],l=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];const u=J(t,i,n,s,o),h=J(r,i,n,s,o),p=new d.V({view:s,extensionType:d.n.FADED,start:u,end:h,isDraped:o,color:a.lineColor,renderOccluded:o?R.yD.OccludeAndTransparent:R.yD.Opaque,renderGroup:Z.eZ.SnappingHint,isDecoration:!0});switch(e){case L.ze.TARGET:p.width=V.c.lineHintWidthTarget,p.fadedExtensions={start:0,end:V.c.lineHintFadedExtensions};break;case L.ze.REFERENCE_EXTENSION:p.width=V.c.lineHintWidthReference,p.fadedExtensions={start:0,end:0};break;case L.ze.REFERENCE:p.width=V.c.lineHintWidthReference,p.fadedExtensions={start:c?V.c.lineHintFadedExtensions:0,end:l?V.c.lineHintFadedExtensions:0}}return p.attached=!0,p}(e.type,a,o,i,$(e),r,n,e.isDraped,e.fadeLeft,e.fadeRight))}visualizeParallelSign(e,t){const{view:r,spatialReference:i}=t,n=B(t),{isDraped:o}=e,c=$(e),l=Y(e.lineStart,e.domain,t),u=Y(e.lineEnd,e.domain,t),d=J(l,i,c,r,o),h=J(u,i,c,r,o),p=(0,a.m)(h,d,h,.5),f=new S({view:r,attached:!1,offset:V.c.parallelLineHintOffset,length:V.c.parallelLineHintLength,width:V.c.parallelLineHintWidth,color:n.parallelSignColor,location:p,renderOccluded:o?R.yD.OccludeAndTransparent:R.yD.Opaque,isDraped:o,renderGroup:Z.eZ.SnappingHint,isDecoration:!0});return f.setDirectionFromPoints(d,p),f.attached=!0,(0,s.ed)(f)}visualizeRightAngleQuad(e,t){const{view:r,spatialReference:i}=t,n=B(t),a=$(e),{isDraped:o}=e,c=Y(e.previousVertex,e.domain,t),l=Y(e.centerVertex,e.domain,t),u=Y(e.nextVertex,e.domain,t),d=J(c,i,a,r,o),h=J(l,i,a,r,o),p=J(u,i,a,r,o);return(0,s.ed)(new F.R({view:r,attached:!0,color:o?n.rightAngleColorDraped:n.rightAngleColor,renderOccluded:o?R.yD.OccludeAndTransparent:R.yD.Transparent,outlineRenderOccluded:o?R.yD.OccludeAndTransparent:R.yD.Opaque,outlineColor:n.rightAngleOutlineColor,outlineSize:V.c.rightAngleHintOutlineSize,size:V.c.rightAngleHintSize,isDraped:o,geometry:{previous:d,center:h,next:p},renderGroup:Z.eZ.SnappingHint,isDecoration:!0}))}}function B(e){const{effectiveTheme:t}=e.view,r=i.Z.toUnitRGBA(t.accentColor),s=[0,0,0,0];return{intersectionPointColor:s,intersectionPointOutlineColor:r,pointColor:s,pointOutlineColor:r,lineColor:r,lineOutlineColor:void 0,parallelSignColor:r,rightAngleColor:r,rightAngleColorDraped:i.Z.toUnitRGBA((0,n.G)(t.accentColor,.5)),rightAngleOutlineColor:r}}function Y(e,t,r){let{selfSnappingZ:i,view:n,spatialReference:s}=r;return t&k.B.SELF&&(0,q.hx)(e)&&null!=i?(0,q.Vx)(e,i,n,s):e}function $(e){return e.isDraped?l.tR:l.jG}function J(e,t,r,i,n){const s=(0,o.Ue)();if(n){const r=i.basemapTerrain.overlayManager.renderer.spatialReference;(0,c.S)(e,t,s,r)}else(0,u.R)(e,t,r,i,s);return s}},98917:(e,t,r)=>{r.d(t,{R:()=>R});var i=r(94172),n=r(29134),s=r(7025),a=r(32035),o=r(12400),c=r(19093),l=r(86361),u=r(51378),d=r(55946),h=r(19182),p=r(19265),f=r(91526),_=r(2952),g=r(70619),m=r(56529),v=r(39077),O=r(4760),D=r(66832),y=r(58901);class R extends h.i{constructor(e){super(e),this._maxSize=0,this._position=(0,o.Ue)(),this._up=(0,o.Ue)(),this._right=(0,o.Ue)(),this._renderOccluded=m.yD.OccludeAndTransparent,this._color=(0,l.al)(1,0,0,1),this._outlineColor=(0,l.al)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=m.yD.Opaque,this.applyProperties(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:()=>{},cameraChanged:()=>this._updateTransformObject3D()}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:w}}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){(0,c.c)(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,c.c)(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry(e){let{previous:t,center:r,next:i}=e;this._maxSize=Math.min((0,a.j)(r,t),(0,a.j)(r,i))/3,(0,a.n)(this._up,(0,a.d)(this._up,t,r)),(0,a.n)(this._right,(0,a.d)(this._right,i,r)),(0,a.c)(this._position,r),this.recreateGeometry()}_createObject3DResources(e){const t=new D.E(this._quadMaterialParameters),r=0===this._outlineSize?void 0:new y.U(this._outlineMaterialParameters);return this._createObject3DGeometries(e,t,r),{quadMaterial:t,outlineMaterial:r,forEach:e=>{e(t),r&&e(r)}}}_createObject3DGeometries(e,t,r){if((0,a.p)(this._up,o.AG)&&(0,a.p)(this._right,o.AG))return;const i=this._createGeometries(t,r);for(const n of i)e.addGeometry(n);this._updateTransformObject3D(e)}_createDrapedResources(){const e=new D.E(this._quadMaterialParameters),t=0===this._outlineSize?void 0:new y.U(this._outlineMaterialParameters),r=this._createGeometries(e,t).map((e=>new v.z(e)));return this._setTransformDraped(r),{quadMaterial:e,outlineMaterial:t,geometries:r,pixelRatioHandle:(0,i.YP)((()=>this.view.state.contentPixelRatio),(()=>{this.drapedResources.recreateGeometry()}))}}_createGeometries(e,t){const{up:r,right:i,corner:n}=this._getVertices(),s=function(e,t,r,i){return new _.Z(i,[[O.T.POSITION,new f.a([0,0,0,...t,...e,...r],[0,1,2,1,2,3],3,!0)]])}(r,i,n,e);return t?[s,(0,g.rh)(t,[r,n,i])]:[s]}_getVertices(){let e=this._up,t=this._right;const r=(0,a.g)(u.WM.get(),e,t);return this.isDraped&&(e=(0,a.c)(u.WM.get(),e),t=(0,a.c)(u.WM.get(),t),e[2]=0,t[2]=0,r[2]=0),{up:e,right:t,corner:r}}_updateTransform(){this.isDraped?this.drapedResources.recreateGeometry():this._updateTransformObject3D()}_updateTransformObject3D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.object3dResources.object;if(!e)return;const t=this.view.state.camera,r=this._size*t.computeScreenPixelSizeAt(this._position),i=Math.min(this._maxSize,r);(0,n.vc)(x,this._position),(0,n.bA)(x,x,[i,i,i]),e.transformation=x}_setTransformDraped(e){if(0===e.length)return;const{view:{basemapTerrain:{overlayManager:t},state:{contentPixelRatio:r}}}=this,{_position:i,_size:s}=this,o=(0,a.c)(u.WM.get(),i);o[2]=p.gi;const c=P;c.spatialReference=t.renderer.spatialReference,c.x=o[0],c.y=o[1];const l=s*(this.view.overlayPixelSizeInMapUnits(c)*r),d=Math.min(this._maxSize,l);(0,n.vc)(x,o),(0,n.bA)(x,x,[d,d,1]);for(const n of e)n.transformation=x}get _quadMaterialParameters(){return{color:this._color,forceTransparentMode:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateQuadMaterial(){this.object3dResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters),this.drapedResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters)}get _outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded,isDecoration:this.isDecoration}}_updateOutlineMaterial(){this.object3dResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters),this.drapedResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters)}}function w(e){e.pixelRatioHandle.remove(),e.geometries=[]}const x=(0,s.Ue)(),P=(0,d.T)(0,0,void 0,null)},34019:(e,t,r)=>{r.d(t,{N:()=>i});class i{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ,this.drawConstraints=e.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}},80151:(e,t,r)=>{r.d(t,{W:()=>h});var i=r(92026),n=r(66978),s=r(94172),a=r(70178),o=r(37818),c=r(74509),l=r(74229),u=r(34019),d=r(93463);function h(e){let{predicate:t=(()=>!0),snappingManager:r,snappingContext:o,updatingHandles:h,useZ:m=!0}=e;const v=new l.hM;if(null==r)return{snappingStep:[g,v],cancelSnapping:g};let O,D=null,y=null,R=null;const w=()=>{D=(0,i.IM)(D),r.doneSnapping(),y?.frameTask.remove(),y=null,O=(0,i.hw)(O),R=null},x=(P=r,S=m,b=v,(0,n.Ds)((async(e,t)=>{let{frameTask:r,point:i,scenePoint:n,context:s,event:o,delta:c,getLastState:l}=e;const u=await r.schedule((()=>P.snap({point:i,scenePoint:n,context:s,signal:t})),t);if(u.valid){let e=await r.schedule((()=>u.apply()),t);const n=l();null!=n.point&&i!==n.point&&(e=P.update({point:n.point,scenePoint:n.scenePoint,context:s})),null!=n.updatePoint&&(0,a.kg)(e,n.updatePoint)||(_(o.mapEnd,e,c,S),b.execute(o))}})));var P,S,b;let z=null,G=null,M=null;return{snappingStep:[e=>{if(!t(e))return e;const{action:i}=e;if("start"===i){const{info:t}=e,i=function(e){return"3d"===e.type?e.resourceController.scheduler.registerTask(d.T8.SNAPPING):d.sq}(r.view);if(y=function(e,t,r){return{context:new u.N({editGeometryOperations:e.editGeometryOperations,elevationInfo:e.elevationInfo,pointer:e.pointer,vertexHandle:null!=t.info?t.info.handle:null,excludeFeature:e.excludeFeature,feature:e.feature,visualizer:e.visualizer}),originalPos:null!=t.snapOrigin?e.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,originalScenePos:null!=t.scenePoints?t.scenePoints.sceneStart:null,frameTask:r}}(o,e,i),y.context.selfSnappingZ=null,!m&&null!=t){const e=function(e,t){if(!e.hasZ())return null;const r=t.vertices;let i=null;for(const n of r){const t=e.getZ(n.pos);if(null!=i&&null!=t&&Math.abs(t-i)>1e-6)return null;null==i&&(i=t)}return i}(o.coordinateHelper,t.handle.component);null!=e&&(y.context.selfSnappingZ={value:e,elevationInfo:o.elevationInfo??c.jG})}}if(null!=y){const{context:t,originalScenePos:a,originalPos:o}=y,{mapEnd:c,mapStart:l,scenePoints:u}=e,d=p(o,f(c,l)),g=f(l,o),v={...e,action:"update"},w=y.context,P=function(e,t){return null==e||null==t?null:p(e,f(t.sceneEnd,t.sceneStart))}(a,u),S=r.update({point:d,scenePoint:P,context:t});if(M=S,_(c,S,g,m),z=d,G=P,"end"!==i){const{frameTask:e}=y;null==D&&(D=new AbortController),R=t=>{h.addPromise((0,n.R8)(x({frameTask:e,event:v,context:w,point:d,scenePoint:P,delta:g,getLastState:()=>({point:z,scenePoint:G,updatePoint:t.forceUpdate?null:M})},D.signal)))},R({forceUpdate:!1}),null==O&&(O=(0,s.YP)((()=>r.options.effectiveEnabled),(()=>R?.({forceUpdate:!0}))))}}return"end"===i&&w(),e},v],cancelSnapping:e=>(w(),e)}}function p(e,t){let[r,i,n]=t;const s=(0,o.WG)(e);return s.x+=r,s.y+=i,s.hasZ&&(s.z+=n),s}function f(e,t){const r=e.hasZ&&t.hasZ?e.z-t.z:0;return[e.x-t.x,e.y-t.y,r]}function _(e,t,r,i){let[n,s,a]=r;e.x=t.x+n,e.y=t.y+s,i&&e.hasZ&&t.hasZ&&(e.z=t.z+a)}function g(e){return e}},38561:(e,t,r)=>{r.d(t,{a:()=>l});var i=r(42537),n=r(90609),s=r(53397),a=r(5916),o=r(61309),c=r(41216);class l{draw(e,t){const r=function(e){const t=[];for(const r of e){let e=!0;for(const i of t)if(r.equals(i)){e=!1;break}e&&t.push(r)}return t}(e),l=this.sortUniqueHints(r),u=[];for(const i of l)i instanceof n.w&&u.push(this.visualizeIntersectionPoint(i,t)),i instanceof s.w&&u.push(this.visualizeLine(i,t)),i instanceof a.L&&u.push(this.visualizeParallelSign(i,t)),i instanceof c.y&&u.push(this.visualizeRightAngleQuad(i,t)),i instanceof o.n&&u.push(this.visualizePoint(i,t));return(0,i.AL)(u)}sortUniqueHints(e){return e}}},61309:(e,t,r)=>{r.d(t,{n:()=>s});var i=r(32035),n=r(55054);class s extends n.r{constructor(e,t,r){super(t,r),this.point=e}equals(e){return e instanceof s&&(0,i.p)(this.point,e.point)}}}}]);
//# sourceMappingURL=3093.f526a250.chunk.js.map