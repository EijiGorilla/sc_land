"use strict";(self.webpackChunksc_land=self.webpackChunksc_land||[]).push([[9240],{74509:(e,t,n)=>{n.d(t,{Jn:()=>a,LR:()=>b,RL:()=>u,Uy:()=>y,VW:()=>l,W_:()=>g,Wb:()=>f,jG:()=>w,kf:()=>m,tR:()=>S,tq:()=>h,vQ:()=>c,zx:()=>p});var i=n(88152);function r(e){return e?w:S}function o(e,t){return null!==t&&void 0!==t&&t.mode?t.mode:r(e).mode}function s(e,t){return null!=t?t:r(e)}function l(e,t){return o(null!=e&&e.hasZ,t)}function a(e,t){return s(null!=e&&!!e.hasZ,t)}function u(e){var t,n;const r=d(e),o=l(e.geometry,r);return{mode:o,offset:null!=r&&"on-the-ground"!==o?(null!==(t=r.offset)&&void 0!==t?t:0)*(0,i.Z7)(null!==(n=r.unit)&&void 0!==n?n:"meters"):0}}function d(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function c(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,i)}function p(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return v(e,t[0],t[1],t.length>2?t[2]:0,n,i,r)}function v(e,t,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null==o)return;const l=null!=s?s.mode:"absolute-height";if("on-the-ground"===l)return 0;const{absoluteZ:a}=h(t,n,i,r,e,o);return function(e,t,n,i,r,o,s,l){var a,u;const d=null!=(null===s||void 0===s?void 0:s.offset)?s.offset:0;switch(l){case"absolute-height":return e-d;case"relative-to-ground":return e-((null!==(a=o.elevationProvider.getElevation(t,n,i,r,"ground"))&&void 0!==a?a:0)+d);case"relative-to-scene":return e-((null!==(u=o.elevationProvider.getElevation(t,n,i,r,"scene"))&&void 0!==u?u:0)+d)}}(a,t,n,i,r,e,s,l)}function h(e,t,n,i,r,o){const s=null!=o.offset?o.offset:0;switch(o.mode){case"absolute-height":return{absoluteZ:n+s,elevation:0};case"on-the-ground":{var l;const n=null!==(l=r.elevationProvider.getElevation(e,t,0,i,"ground"))&&void 0!==l?l:0;return{absoluteZ:n,elevation:n}}case"relative-to-ground":{var a;const o=null!==(a=r.elevationProvider.getElevation(e,t,n,i,"ground"))&&void 0!==a?a:0;return{absoluteZ:n+o+s,elevation:o}}case"relative-to-scene":{var u;const o=null!==(u=r.elevationProvider.getElevation(e,t,n,i,"scene"))&&void 0!==u?u:0;return{absoluteZ:n+o+s,elevation:o}}}}function g(e,t){if(null==t)return!1;const{mode:n}=t;return null!=n&&("scene"===e&&"relative-to-scene"===n||"ground"===e&&"absolute-height"!==n)}function y(e,t,n){return n&&n.mode!==t?"".concat(e," only support ").concat(t," elevation mode"):null}function f(e,t,n){return(null===n||void 0===n?void 0:n.mode)===t?"".concat(e," do not support ").concat(t," elevation mode"):null}function m(e,t){return null!=(null===t||void 0===t?void 0:t.featureExpressionInfo)&&"0"!==t.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function b(e,t){t&&e.warn(".elevationInfo=",t)}const w={mode:"absolute-height",offset:0},S={mode:"on-the-ground",offset:null}},79240:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var i=n(27366),r=n(10064),o=n(92026),s=n(94172),l=n(49861),a=(n(25243),n(63780),n(93169),n(69912)),u=n(42069),d=n(60487),c=n(79510),p=n(77098),v=n(61712),h=n(78485),g=n(67581);let y=class extends((0,u.A)(g.Z)){constructor(){super(...arguments),this.type="graphics-3d",this.symbologySnappingSupported=!0,this._slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null,this.ignoresMemoryFactor=!0}initialize(){this._set("processor",new c.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.addHandles(this.layer.on("graphic-update",(e=>this.processor.graphicsCore.graphicUpdateHandler(e)))),this.addResolvingPromise((0,v.E)(this).then((e=>this.fullExtentInLocalViewSpatialReference=e))),this.layer.internal?this.notifyChange("updating"):this.addHandles((0,s.gx)((()=>{var e;return null===(e=this.view)||void 0===e||null===(e=e.basemapTerrain)||void 0===e?void 0:e.ready}),(()=>()=>this.notifyChange("updating")),{once:!0}))}destroy(){this._updatingHandles.removeAll(),this._set("processor",(0,o.SC)(this.processor))}get loadedGraphics(){return this.layer.graphics}get legendEnabled(){var e;return this.canResume()&&!(null!==(e=this.processor)&&void 0!==e&&e.frustumVisibilitySuspended)}get slicePlaneEnabled(){const e=this.layer.internal;return this._slicePlaneEnabled&&!e}set slicePlaneEnabled(e){this._slicePlaneEnabled=e}getSuspendInfo(){var e,t,n,i;const r=super.getSuspendInfo();return r.outsideScaleRange=null!==(e=null===(t=this.processor)||void 0===t?void 0:t.scaleVisibilitySuspended)&&void 0!==e&&e,r.outsideOfView=null!==(n=null===(i=this.processor)||void 0===i?void 0:i.frustumVisibilitySuspended)&&void 0!==n&&n,r}async fetchPopupFeatures(e,t){var n;return null!==(n=null===t||void 0===t?void 0:t.clientGraphics)&&void 0!==n?n:[]}getHit(e){return this.processor.getHit(e)}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){var n;return null===(n=this.processor)||void 0===n?void 0:n.computeAttachmentOrigin(e,t)}getSymbolLayerSize(e,t){return this.processor.getSymbolLayerSize(e,t)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(e){return this.processor.maskOccludee(e)}highlight(e){return this.processor.highlight(e)}async elevationAlignPointsInFeatures(e,t){const{processor:n}=this;if(null==(null===n||void 0===n?void 0:n.graphics3DGraphics))throw new r.Z("graphicslayerview3d:missing-processor","A Graphics3D processor is needed to resolve graphics elevation.");const{graphics3DGraphics:i}=n;return(0,d.W)(this.view,this.layer,(e=>"number"==typeof e?i.get(e):void 0),e,t)}async queryForSymbologySnapping(e,t){return(0,p.c)(this.processor,e,t)}get updatePolicy(){var e;return(null===(e=this.processor)||void 0===e?void 0:e.graphicsCore.effectiveUpdatePolicy)||h.j.SYNC}canResume(){var e;return super.canResume()&&!(null!==(e=this.processor)&&void 0!==e&&e.scaleVisibilitySuspended)}isUpdating(){var e,t;return this.view&&this.layer&&!((null===(e=this.processor)||void 0===e||!e.updating)&&(this.layer.internal||null!==(t=this.view.basemapTerrain)&&void 0!==t&&t.ready))}get performanceInfo(){var e,t,n;return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:null!==(e=null===(t=this.processor)||void 0===t?void 0:t.elevationAlignment.updating)&&void 0!==e&&e,visibilityFrustum:!(null!==(n=this.processor)&&void 0!==n&&n.frustumVisibilitySuspended)}}get usedMemory(){var e,t;return null!==(e=null===(t=this.processor)||void 0===t||null===(t=t.graphicsCore)||void 0===t?void 0:t.usedMemory)&&void 0!==e?e:0}get unloadedMemory(){var e;return null===(e=this.processor)||void 0===e||null===(e=e.graphicsCore)||void 0===e?void 0:e.unprocessedMemoryEstimate}};(0,i._)([(0,l.Cb)()],y.prototype,"loadedGraphics",null),(0,i._)([(0,l.Cb)({readOnly:!0})],y.prototype,"legendEnabled",null),(0,i._)([(0,l.Cb)()],y.prototype,"layer",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],y.prototype,"processor",void 0),(0,i._)([(0,l.Cb)()],y.prototype,"_slicePlaneEnabled",void 0),(0,i._)([(0,l.Cb)({type:Boolean})],y.prototype,"slicePlaneEnabled",null),y=(0,i._)([(0,a.j)("esri.views.3d.layers.GraphicsLayerView3D")],y);const f=y},42069:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(27366),r=n(42537),o=n(66978),s=n(94172),l=n(49861),a=(n(25243),n(63780),n(93169),n(69912)),u=n(5354);const d=e=>{let t=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),(0,u.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.addHandles((0,r.kB)((()=>e.abort()))),await(0,s.N1)((()=>{var e;return null===(e=this.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady}),t),(0,o.k_)(t);const n=(0,u.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(n)throw n}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!(null!==e&&void 0!==e&&e.minScale)||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(e.outsideScaleRange=!0),e}};return(0,i._)([(0,l.Cb)()],t.prototype,"view",void 0),(0,i._)([(0,l.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,i._)([(0,a.j)("esri.views.3d.layers.LayerView3D")],t),t}},60487:(e,t,n)=>{n.d(t,{W:()=>c});n(59486);var i=n(66978),r=n(4043),o=n(55946),s=n(74509),l=n(69691),a=n(78935),u=n(8821),d=n(78952);async function c(e,t,n,o,a){var c;const{elevationProvider:y,renderCoordsHelper:f}=e,{elevationInfo:m}=t,{pointsInFeatures:b,spatialReference:w}=o,S=d.Z.fromJSON(w),_=(0,u.WI)(m,!0),I=await(0,u.kr)(_,S,a);(0,i.k_)(a);const C=[],R=new Set,E=new Set;v.spatialReference=S;const P=null!==(c=e.elevationProvider.spatialReference)&&void 0!==c?c:e.spatialReference;for(const{objectId:i,points:u}of b){const e=n(i);if(null==e){for(const e of u){var x;C.push(null!==(x=e.z)&&void 0!==x?x:0)}R.add(i);continue}e.isDraped&&E.add(i);const o=e.graphic.geometry;p.setFromElevationInfo((0,s.Jn)(o,m)),p.updateFeatureExpressionInfoContext(I,e.graphic,t);for(const{x:t,y:n,z:i}of u)v.x=t,v.y=n,v.z=null!==i&&void 0!==i?i:0,await(0,r.t)(v,g,P,0,{signal:a}),(0,l.qZ)(g,y,p,f,h),C.push(h.z)}return{elevations:C,drapedObjectIds:E,failedObjectIds:R}}const p=new a.o,v=(0,o.T)(0,0,0,d.Z.WGS84),h=new l.Lm,g=[0,0,0]},77098:(e,t,n)=>{n.d(t,{c:()=>o});var i=n(66978),r=n(819);async function o(e,t,n){var o;if(null==e||0===t.candidates.length)return s;const l=null!==(o=e.graphics3DGraphicsByObjectID)&&void 0!==o?o:e.graphics3DGraphics,a=[],u=[],{renderer:d}=e,c=null!=d&&"arcadeRequired"in d&&d.arcadeRequired?(0,r.LC)():null,p=async(t,i)=>{let{graphic:r,graphics3DSymbol:o}=i;const s=await c,l=await e.getRenderingInfoAsync(r,d,s,{signal:n});return null==l?[]:o.queryForSnapping(t,h,l,n)},{candidates:v,spatialReference:h}=t;for(let i=0;i<v.length;++i){const e=v[i],{objectId:t}=e,n="number"==typeof t?null===l||void 0===l?void 0:l.get(t):void 0;if(null==n)continue;const{graphics3DSymbol:r}=n;r.symbologySnappingSupported&&(a.push(p(e,n)),u.push(i))}if(0===a.length)return s;const g=await Promise.all(a);(0,i.k_)(n);const y=[],f=[];for(let i=0;i<g.length;++i){const e=g[i],t=u[i];for(const n of e)y.push(n),f.push(t)}return{candidates:y,sourceCandidateIndices:f}}const s={candidates:[],sourceCandidateIndices:[]}},61712:(e,t,n)=>{n.d(t,{E:()=>o});var i=n(81753),r=n(67387);function o(e){const t=e.view.spatialReference,n=e.layer.fullExtent,o=null!=n&&n.spatialReference;if(null==n||!o)return Promise.resolve(null);if(o.equals(t))return Promise.resolve(n.clone());const s=(0,i.iV)(n,t);return null!=s?Promise.resolve(s):e.view.state.isLocal?(0,r.projectGeometry)(n,t,e.layer.portalItem).then((t=>!e.destroyed&&t?t:null)).catch((()=>null)):Promise.resolve(null)}},67581:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(27366),r=n(7138),o=n(91505),s=n(79056),l=n(32718),a=n(92026),u=n(67426),d=n(49861),c=(n(25243),n(63780),n(93169),n(69912)),p=n(46634);let v=class extends((0,s.IG)((0,u.v)(o.Z.EventedMixin(r.Z)))){constructor(e){super(e),this._updatingHandles=new p.R,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){var t;const n=this.layer&&this.layer.id||"no id",i=(null===(t=this.layer)||void 0===t?void 0:t.title)||"no title";l.Z.getLogger(this).error("#resolve()","Failed to resolve layer view (layer title: '".concat(i,"', id: '").concat(n,"')"),e)}}))}destroy(){this._updatingHandles=(0,a.SC)(this._updatingHandles)}get fullOpacity(){var e,t,n,i;return(null!==(e=null===(t=this.layer)||void 0===t?void 0:t.opacity)&&void 0!==e?e:1)*(null!==(n=null===(i=this.parent)||void 0===i?void 0:i.fullOpacity)&&void 0!==n?n:1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}get updating(){var e;return!((null===(e=this._updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)}set visible(e){this._overrideIfSome("visible",e)}canResume(){var e,t,n;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(t=this.parent)&&void 0!==t&&t.suspended)&&(null===(n=this.view)||void 0===n?void 0:n.ready)||!1}getSuspendInfo(){var e,t;const n=null!==(e=this.parent)&&void 0!==e&&e.suspended?this.parent.suspendInfo:{};return null!==(t=this.view)&&void 0!==t&&t.ready||(n.viewNotReady=!0),this.layer&&this.layer.loaded||(n.layerNotLoaded=!0),this.visible||(n.layerInvisible=!0),n}isUpdating(){return!1}};(0,i._)([(0,d.Cb)()],v.prototype,"fullOpacity",null),(0,i._)([(0,d.Cb)()],v.prototype,"layer",void 0),(0,i._)([(0,d.Cb)()],v.prototype,"parent",void 0),(0,i._)([(0,d.Cb)({readOnly:!0})],v.prototype,"suspended",null),(0,i._)([(0,d.Cb)({readOnly:!0})],v.prototype,"suspendInfo",null),(0,i._)([(0,d.Cb)({readOnly:!0})],v.prototype,"legendEnabled",null),(0,i._)([(0,d.Cb)({type:Boolean,readOnly:!0})],v.prototype,"updating",null),(0,i._)([(0,d.Cb)({readOnly:!0})],v.prototype,"updatingProgress",null),(0,i._)([(0,d.Cb)()],v.prototype,"visible",null),(0,i._)([(0,d.Cb)()],v.prototype,"view",void 0),v=(0,i._)([(0,c.j)("esri.views.layers.LayerView")],v);const h=v}}]);
//# sourceMappingURL=9240.90f91952.chunk.js.map