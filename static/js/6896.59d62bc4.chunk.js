"use strict";(self.webpackChunksc_land=self.webpackChunksc_land||[]).push([[6896],{80573:(e,t,s)=>{s.d(t,{Z:()=>p});var i=s(27366),n=s(7138),r=s(63780),o=s(11582),a=s(79056),l=s(46784),c=s(49861),u=(s(93169),s(32718),s(69912));let h=0,d=class extends((0,l.eC)((0,o.J)((0,a.IG)(n.Z)))){constructor(e){super(e),this.id="".concat(Date.now().toString(16),"-analysis-").concat(h++),this.title=null}get parent(){return this._get("parent")}set parent(e){const t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(r.pC)}};(0,i._)([(0,c.Cb)({type:String,constructOnly:!0,clonable:!1})],d.prototype,"id",void 0),(0,i._)([(0,c.Cb)({type:String})],d.prototype,"title",void 0),(0,i._)([(0,c.Cb)({clonable:!1,value:null})],d.prototype,"parent",null),(0,i._)([(0,c.Cb)({readOnly:!0})],d.prototype,"isEditable",null),d=(0,i._)([(0,u.j)("esri.analysis.Analysis")],d);const p=d},48681:(e,t,s)=>{s.d(t,{D1:()=>u,Ue:()=>l,fq:()=>h,l:()=>c,wE:()=>d,y1:()=>p});var i=s(32035),n=s(12400),r=s(23470),o=s(80064),a=s(4739);function l(e,t){const s=(0,r.g)(t);(0,i.s)(s,0,0,0);for(let r=0;r<e.length;++r)(0,i.g)(s,s,e[r]);(0,i.j)(s,s,1/e.length);let n=0;for(let r=0;r<e.length;++r)n=Math.max(n,(0,i.a)(s,e[r]));t[3]=Math.sqrt(n)}function c(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");(0,o.pG)(e[0],e[1],e[2],t)}function u(e,t){return(0,i.m)(e,t)+e[3]}function h(e,t,s,n){const r=_;return(0,i.c)(r.rings[0][0],e),(0,i.c)(r.rings[0][1],t),(0,i.c)(r.rings[0][2],s),(0,i.c)(r.rings[0][3],e),r.spatialReference=n,(0,a.Y)(r)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=(e,t)=>{if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(let s=0;s<e.length;++s)if((0,i.m)(t,e[s])<-1e-6)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&(0,i.c)(t,e[0]),!0;(0,i.s)(v,0,0,0);for(let r=0;r<e.length;++r)(0,i.g)(v,v,e[r]);if((0,i.n)(v,v),n(e,v))return t&&(0,i.c)(t,v),!0;if(!s)return!1;for(let r=0;r<e.length;++r)for(let s=0;s<e.length;++s)if(r!==s&&((0,i.b)(v,e[r],e[s]),(0,i.n)(v,v),n(e,v)))return t&&(0,i.c)(t,v),!0;return!1}function p(e){return"mouse"!==e.pointerType||0===e.button}const _={hasM:!1,hasZ:!0,rings:[[(0,n.Ue)(),(0,n.Ue)(),(0,n.Ue)(),(0,n.Ue)()]],spatialReference:null,type:"polygon"},v=(0,n.Ue)()},86509:(e,t,s)=>{s.d(t,{f:()=>a});var i=s(27366),n=s(94172),r=(s(32718),s(93169),s(84936),s(10064),s(69912)),o=s(45900);let a=class extends o.m{constructor(e){super(e)}initialize(){this.addHandles((0,n.YP)((()=>this.analysisViewData.visible),(e=>this.visible=e),n.tX))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};a=(0,i._)([(0,r.j)("esri.views.interactive.AnalysisToolBase")],a)},4739:(e,t,s)=>{s.d(t,{Y:()=>a});var i=s(47898),n=s(2170),r=s(15559),o=s(47072);function a(e){const{spatialReference:t}=e;return(0,o.T5)(t,l,c,e)}function l(e){return(0,i.ne)(Math.abs((0,r.p8)([e],"square-meters")[0]),"square-meters")}function c(e){try{return(0,i.ne)(Math.abs((0,n.geodesicArea)(e,"square-meters")),"square-meters")}catch(t){return null}}},40085:(e,t,s)=>{s.d(t,{O:()=>_});var i,n,r=s(27366),o=s(14921),a=(s(93169),s(32718)),l=s(92026),c=s(66978),u=s(94172),h=s(49861),d=(s(84936),s(69912)),p=s(32845);(n=i||(i={}))[n.PENDING=0]="PENDING",n[n.WAIT_FOR_VIEW_READY=1]="WAIT_FOR_VIEW_READY",n[n.RUNNING=2]="RUNNING";let _=class extends p.V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.analysisView=null,this._reconnectViewTask=null,this._parentChangeFromReconnect=!1,this._startUserOperation=null;const t=null===e||void 0===e?void 0:e.analysis;null!=t?this.analysis=t:(this._set("analysis",this.constructAnalysis()),this._set("isAnalysisOwner",!0))}normalizeCtorArgs(e){const{analysis:t,...s}=e;return s}initialize(){this.addHandles([(0,u.YP)((()=>{var e;return null===(e=this.analysis)||void 0===e?void 0:e.parent}),(e=>{this._parentChangeFromReconnect||e===this.view||this._set("isAnalysisOwner",!1);const t=!this._parentChangeFromReconnect;this._parentChangeFromReconnect=!1,t&&this._scheduleViewReconnect()}),u.Z_),(0,u.YP)((()=>({view:this.view,ready:null!=this.view&&this.view.ready,supported:this.supported})),((e,t)=>{let{view:s}=e;const i=null===t||void 0===t?void 0:t.view;s!==i&&(this._startUserOperation=(0,l.IM)(this._startUserOperation),this._disconnectFromView(i)),this._scheduleViewReconnect()}),u.tX),(0,u.YP)((()=>this.analysis.isEditable),((e,t)=>{null!=this.analysisView&&(e&&!t&&null==this.tool?this.createTool():e||!t||null==this.tool||this.tool.active||this.removeTool())}))])}destroy(){this._reconnectViewTask=(0,l.IM)(this._reconnectViewTask),this._startUserOperation=(0,l.IM)(this._startUserOperation),null!=this.analysisView&&(this.analysisView.visible=void 0),this._disconnectFromView(this.view),null!=this.analysis&&this.isAnalysisOwner&&(this.analysis.destroy(),this._set("analysis",null))}set analysis(e){e!==this._get("analysis")&&(this._startUserOperation=(0,l.IM)(this._startUserOperation),this._disconnectFromView(this.view),this._setExternalAnalysis(e),this._scheduleViewReconnect())}get ready(){return null!=this.analysisView&&!this.connectingToView}get connectingToView(){return null!=this._reconnectViewTask}get isAnalysisOwner(){return this._get("isAnalysisOwner")}set visible(e){this._set("visible",e),null!=this.analysisView&&(this.analysisView.visible=e)}async start(){if(!this.visible)return void a.Z.getLogger(this).warn("Cannot start analysis when not visible");this.clear();const e={task:null,abort:null,state:i.PENDING},t=(0,o.vr)((async t=>{e.state=i.WAIT_FOR_VIEW_READY,await(0,u.N1)((()=>this.ready),t),e.state=i.RUNNING,this.createTool({interactive:!0})}));return e.task=t,e.abort=()=>t.abort(),this._startUserOperation=e,t.promise}clear(){this._startUserOperation=(0,l.IM)(this._startUserOperation),this.removeTool(),this.analysis.clear()}onConnectToAnalysisView(e){}onDisconnectFromAnalysisView(){}_scheduleViewReconnect(){this._reconnectViewTask=(0,l.IM)(this._reconnectViewTask);const e=(0,o.vr)((async t=>{try{await this._reconnectView(t)}catch(s){if((0,c.k_)(t),!(0,c.D_)(s))return void a.Z.getLogger(this).warn("Failed to use analysis in view model",s);throw s}finally{e===this._reconnectViewTask&&(this._reconnectViewTask=null)}}));this._reconnectViewTask=e}async _reconnectView(e){const{view:t}=this,s=null!=t&&t.ready&&this.supported,i=this.analysis;if(this._startUserOperation=v(this._startUserOperation),this._disconnectFromView(t),s&&null!=t&&null!=i){if(this.isAnalysisOwner){if(null!=i.parent)return void this.logError("expected owned analysis to have null parent when connecting to view");this._parentChangeFromReconnect=!0,t.analyses.add(i)}this.analysisView=await t.whenAnalysisView(i),(0,c.Hc)(e)?this._startUserOperation=v(this._startUserOperation):(this.analysisView.visible=this.visible,this.onConnectToAnalysisView(this.analysisView),this.createTool())}}_disconnectFromView(e){this.removeTool(),null!=e&&this.isAnalysisOwner&&(this._parentChangeFromReconnect=!0,e.analyses.remove(this.analysis),this.analysis.clear()),this.analysisView=null,this.onDisconnectFromAnalysisView()}_setExternalAnalysis(e){null==this.analysisView||this.isAnalysisOwner||(this.analysisView.visible=!0),this.analysisView=null,this._set("isAnalysisOwner",!1),this._set("analysis",e),this._parentChangeFromReconnect=!1}get testInfo(){}};function v(e){return null!=e&&e.state>=i.RUNNING?(e.abort(),null):e}(0,r._)([(0,h.Cb)({nonNullable:!0})],_.prototype,"analysis",null),(0,r._)([(0,h.Cb)()],_.prototype,"analysisView",void 0),(0,r._)([(0,h.Cb)()],_.prototype,"ready",null),(0,r._)([(0,h.Cb)()],_.prototype,"connectingToView",null),(0,r._)([(0,h.Cb)({readOnly:!0})],_.prototype,"isAnalysisOwner",null),(0,r._)([(0,h.Cb)({type:Boolean,value:!0})],_.prototype,"visible",null),(0,r._)([(0,h.Cb)()],_.prototype,"_reconnectViewTask",void 0),_=(0,r._)([(0,d.j)("esri.widgets.support.InteractiveAnalysisViewModel")],_)},32845:(e,t,s)=>{s.d(t,{V:()=>c});var i=s(27366),n=s(7138),r=s(32718),o=s(94172),a=s(49861),l=(s(93169),s(84936),s(69912));let c=class extends n.Z{constructor(e){super(e),this.tool=null,this._loggedUnsupportedErrorOnce=!1,null!=(null===e||void 0===e?void 0:e.visible)&&(this.visible=e.visible)}initialize(){this.addHandles((0,o.YP)((()=>({ready:null!=this.view&&this.view.ready,supported:this.supported})),(e=>{let{ready:t,supported:s}=e;!t||s||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)}),o.tX))}destroy(){this.removeTool(),this.view=null}get active(){return null!=this.tool&&this.tool.active}get disabled(){return null==this.view||!this.view.ready||!this.supported}get supported(){return null==this.view||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this.removeHandles(t),null!=e&&this.addHandles(e.tools.on("after-remove",(e=>{e.item===this.tool&&this._set("tool",null)})),t)}set visible(e){this._set("visible",e),null!=this.tool&&(this.tool.visible=e)}createTool(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interactive:!1};if(this.removeTool(),null==this.view||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),(0,o.gx)((()=>t.created),(()=>{t.active&&null!=this.view&&(this.view.activeTool=null)}),{initial:!0,once:!0})):t.destroy()}removeTool(){var e;const t=this.tool;if(null==t)return;const s=null===(e=this.view)||void 0===e?void 0:e.tools;null!=s?s.remove(t):t.destroy(),this._set("tool",null)}logError(){r.Z.getLogger(this).error(...arguments)}};(0,i._)([(0,a.Cb)({constructOnly:!0})],c.prototype,"tool",void 0),(0,i._)([(0,a.Cb)()],c.prototype,"active",null),(0,i._)([(0,a.Cb)()],c.prototype,"disabled",null),(0,i._)([(0,a.Cb)()],c.prototype,"supported",null),(0,i._)([(0,a.Cb)({value:null})],c.prototype,"view",null),(0,i._)([(0,a.Cb)({type:Boolean,value:!0})],c.prototype,"visible",null),c=(0,i._)([(0,l.j)("esri.widgets.support.InteractiveToolViewModel")],c)},82052:(e,t,s)=>{s.d(t,{s:()=>y});var i=s(27366),n=s(49861),r=(s(93169),s(32718),s(84936),s(69912)),o=s(33565),a=s(8905),l=s(68860),c=(s(80975),s(80532)),u=s(67005);const h="esri-unit-select",d={base:h,label:"".concat(h,"__label"),select:"".concat(h,"__select")};let p=class extends o.Z{constructor(e,t){super(e,t),this._onSelectChange=e=>{this.onChange(e.target.value)}}loadDependencies(){return(0,a.h)({label:()=>Promise.resolve().then(s.bind(s,35738)),option:()=>s.e(9790).then(s.bind(s,19790)),select:()=>s.e(6369).then(s.bind(s,26369))})}render(){const{messages:e,options:t,selectLabel:s,value:i,_onSelectChange:n}=this;return(0,u.u)("div",{class:d.base,key:"units"},(0,u.u)("calcite-label",{class:d.label},s,(0,u.u)("calcite-select",{class:d.select,label:s,onCalciteSelectChange:n},t.map((t=>{var s;return(0,u.u)("calcite-option",{key:t,selected:t===i,value:t},(0,l.ZO)(t)?e.systems[t]:null===(s=e.units[t])||void 0===s?void 0:s.pluralCapitalized)})))))}};(0,i._)([(0,n.Cb)()],p.prototype,"options",void 0),(0,i._)([(0,n.Cb)()],p.prototype,"onChange",void 0),(0,i._)([(0,n.Cb)()],p.prototype,"selectLabel",void 0),(0,i._)([(0,n.Cb)()],p.prototype,"value",void 0),(0,i._)([(0,n.Cb)(),(0,c.H)("esri/core/t9n/Units")],p.prototype,"messages",void 0),p=(0,i._)([(0,r.j)("esri.widgets.support.UnitSelect")],p);const _="esri-measurement-widget-content",v={base:_,actions:"".concat(_,"__actions"),error:"".concat(_,"__error"),hint:"".concat(_,"__hint"),hintText:"".concat(_,"__hint-text"),panelError:"".concat(_,"__panel--error"),settings:"".concat(_,"__settings"),measurement:"".concat(_,"__measurement"),measurementItem:"".concat(_,"__measurement-item"),measurementItemDisabled:"".concat(_,"__measurement-item--disabled"),measurementItemTitle:"".concat(_,"__measurement-item__title"),measurementItemValue:"".concat(_,"__measurement-item__value")};let y=class extends o.Z{constructor(e,t){super(e,t)}loadDependencies(){return(0,a.h)({button:()=>Promise.resolve().then(s.bind(s,32275))})}render(){return(0,u.u)("div",{class:v.base},this._renderContent())}_renderContent(){const{supported:e,active:t,state:s}=this;switch(s){case"disabled":case"ready":return e?t?this._renderHint():this._renderActions():this._renderUnsupportedMessage();case"measuring":case"measured":return[this._renderSettings(),this._renderMeasurement(),this._renderActions()]}}_renderUnsupportedMessage(){return(0,u.u)("section",{class:v.error,key:"unsupported"},(0,u.u)("p",null,this.messages.unsupported))}_renderHint(){const{messages:e}=this;return(0,u.u)("section",{class:v.hint,key:"hint"},(0,u.u)("p",{class:v.hintText},e.hint))}_renderSettings(){return(0,u.u)("div",{class:v.settings,key:"settings"},(0,u.u)(p,{options:this.unitOptions,selectLabel:this.messages.unit,value:this.unit,onChange:this.onUnitChange}))}_renderMeasurement(){return(0,u.u)("section",{class:v.measurement,key:"measurement"},this.measurementItems.map((e=>this._renderMeasurementItem(e))))}_renderMeasurementItem(e){let{key:t,title:s,value:i}=e;return(0,u.u)("div",{class:this.classes(v.measurementItem,null==i&&v.measurementItemDisabled),key:t},(0,u.u)("span",{class:v.measurementItemTitle},s),(0,u.u)("span",{"aria-live":"polite",class:v.measurementItemValue},null!==i&&void 0!==i?i:this.messages.notApplicable))}_renderActions(){const{messages:e}=this;return(0,u.u)("div",{class:v.actions},(0,u.u)("calcite-button",{class:this.newMeasurementButtonClass,disabled:"disabled"===this.state,onclick:this.onNewMeasurementClick},e.newMeasurement))}};(0,i._)([(0,n.Cb)()],y.prototype,"active",void 0),(0,i._)([(0,n.Cb)()],y.prototype,"measurementItems",void 0),(0,i._)([(0,n.Cb)()],y.prototype,"messages",void 0),(0,i._)([(0,n.Cb)()],y.prototype,"newMeasurementButtonClass",void 0),(0,i._)([(0,n.Cb)()],y.prototype,"onNewMeasurementClick",void 0),(0,i._)([(0,n.Cb)()],y.prototype,"onUnitChange",void 0),(0,i._)([(0,n.Cb)()],y.prototype,"state",void 0),(0,i._)([(0,n.Cb)()],y.prototype,"supported",void 0),(0,i._)([(0,n.Cb)()],y.prototype,"unit",void 0),(0,i._)([(0,n.Cb)()],y.prototype,"unitOptions",void 0),y=(0,i._)([(0,r.j)("esri.widgets.support.MeasurementWidgetContent")],y)}}]);
//# sourceMappingURL=6896.59d62bc4.chunk.js.map