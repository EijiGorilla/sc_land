{"version":3,"file":"static/js/8506.46ad8a63.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/maybeUpdating.js","../node_modules/@arcgis/core/layers/buildingSublayers/BuildingGroupSublayer.js","../node_modules/@arcgis/core/layers/support/I3SIndexInfo.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSublayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/i3s/BuildingFilterUtil.js","../node_modules/@arcgis/core/views/layers/BuildingComponentSublayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingComponentSublayerView3D.js","../node_modules/@arcgis/core/views/layers/BuildingSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSceneLayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nconst n=\"updating\";function t(n){return\"updating\"===n?null:n}function u(n){return\"updating\"===n}export{u as isUpdating,t as unwrapUpdating,n as updating};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import{loadAllChildren as o}from\"../../core/loadAll.js\";import s from\"../../core/Warning.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import n from\"./BuildingComponentSublayer.js\";import u from\"./BuildingSublayer.js\";var a;const l={type:e,readOnly:!0,json:{origins:{service:{read:{source:\"sublayers\",reader:p}}},read:!1}};function p(r,o,t){if(r&&Array.isArray(r))return new e(r.map((r=>{const e=y(r);if(e){const o=new e;return o.read(r,t),o}return t?.messages&&r&&t.messages.push(new s(\"building-scene-layer:unsupported-sublayer-type\",\"Building scene sublayer of type '\"+(r.type||\"unknown\")+\"' are not supported\",{definition:r,context:t})),null})))}let c=a=class extends u{constructor(r){super(r),this.type=\"building-group\",this.listMode=\"show\",this.sublayers=null}loadAll(){return o(this,(r=>a.forEachSublayer(this.sublayers,(e=>{\"building-group\"!==e.type&&r(e)}))))}};function y(r){return\"group\"===r.layerType?c:n}r([t({type:[\"hide\",\"show\",\"hide-children\"],json:{write:!0}})],c.prototype,\"listMode\",void 0),r([t(l)],c.prototype,\"sublayers\",void 0),c=a=r([i(\"esri.layers.buildingSublayers.BuildingGroupSublayer\")],c),function(r){function e(r,o){r.forEach((r=>{o(r),\"building-group\"===r.type&&e(r.sublayers,o)}))}r.sublayersProperty=l,r.readSublayers=p,r.forEachSublayer=e}(c||(c={}));const d=c;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import o from\"../../core/Error.js\";async function r(r,n,t,s,a,i){let l=null;if(null!=t){const o=`${r}/nodepages/`,n=o+Math.floor(t.rootIndex/t.nodesPerPage);try{return{type:\"page\",rootPage:(await e(n,{query:{f:\"json\",token:s},responseType:\"json\",signal:i})).data,rootIndex:t.rootIndex,pageSize:t.nodesPerPage,lodMetric:t.lodSelectionMetricType,urlPrefix:o}}catch(u){null!=a&&a.warn(\"#fetchIndexInfo()\",\"Failed to load root node page. Falling back to node documents.\",n,u),l=u}}if(!n)return null;const d=n?.split(\"/\").pop(),p=`${r}/nodes/`,c=p+d;try{return{type:\"node\",rootNode:(await e(c,{query:{f:\"json\",token:s},responseType:\"json\",signal:i})).data,urlPrefix:p}}catch(u){throw new o(\"sceneservice:root-node-missing\",\"Root node missing.\",{pageError:l,nodeError:u,url:c})}}export{r as fetchIndexInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Evented.js\";import{IdentifiableMixin as t}from\"../../../core/Identifiable.js\";import{EsriPromiseMixin as s}from\"../../../core/Promise.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=(p,l)=>{let n=class extends(s(t(r.EventedMixin(p)))){constructor(e){super(e),this.sublayer=null,this.parent=null,this.view=null}initialize(){}get suspended(){return!this.canResume()}get updating(){return!this.suspended&&this.isUpdating()}get visible(){return!!this.sublayer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get fullOpacity(){const e=e=>null!=e?e:1;return e(this.sublayer?.opacity)*e(this.parent?.fullOpacity)}canResume(){return!this.parent?.suspended&&this.view?.ready&&this.visible||!1}isUpdating(){return!1}};return e([i()],n.prototype,\"sublayer\",void 0),e([i()],n.prototype,\"parent\",void 0),e([i({readOnly:!0})],n.prototype,\"suspended\",null),e([i({type:Boolean,readOnly:!0})],n.prototype,\"updating\",null),e([i()],n.prototype,\"view\",void 0),e([i()],n.prototype,\"visible\",null),e([i()],n.prototype,\"fullOpacity\",null),n=e([o(\"esri.views.3d.layers.BuildingSublayerView3D\")],n),n};export{p as BuildingSublayerView3DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{d as e}from\"../../../../chunks/vec4f64.js\";import{createMaterialFromEdges as r}from\"../support/edgeUtils.js\";import{ColorMixModeEnum as a}from\"../support/symbolColorUtils.js\";var o;!function(e){e[e.Solid=0]=\"Solid\",e[e.WireFrame=1]=\"WireFrame\",e[e.XRay=2]=\"XRay\"}(o||(o={}));const l=.15,t=.5*l;function i(e){switch(e.filterMode.type){case\"solid\":return{mode:o.Solid};case\"wire-frame\":return{mode:o.WireFrame,edgeMaterial:r(e.filterMode.edges,{})};case\"x-ray\":return{mode:o.XRay}}}function c(e,r){if(null==r)return e.color[3]=0,e.edgeMaterial=null,void(e.pickable=!1);switch(r.mode){case o.Solid:return;case o.WireFrame:return e.color[3]=0,e.edgeMaterial=r.edgeMaterial,void(e.pickable=!1);case o.XRay:return e.color[0]=1,e.color[1]=1,e.color[2]=1,e.color[3]*=l,e.colorMixMode=a.Replace,e.castShadows=!1,e.pickable=!1,void(e.edgeMaterial=n(e.edgeMaterial))}}function n(e){return null==e?null:(s.lastMaterial!==e&&(s.cachedMaterial=d(e),s.lastMaterial=e),s.cachedMaterial)}function d(r){const a=e(r.color);return a[3]*=t,{...r,color:a}}const s={cachedMaterial:null,lastMaterial:null};export{o as FilterModeEnum,c as applyFilterMode,i as parseFilterMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/accessorSupport/extensions/serializableProperty/reader.js\";import\"../../core/Error.js\";class o extends e{constructor(){super(...arguments),this.sublayer=null}get updating(){return!1}get suspended(){return!1}get availableFields(){return[]}get filter(){return null}set filter(r){throw new Error(\"Not implemented\")}queryFeatures(r,e){throw new Error(\"Not implemented\")}queryObjectIds(r,e){throw new Error(\"Not implemented\")}queryFeatureCount(r,e){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(r,e){throw new Error(\"Not implemented\")}highlight(r){throw new Error(\"Not implemented\")}}r([t()],o.prototype,\"sublayer\",void 0),r([t()],o.prototype,\"availableFields\",null),r([t()],o.prototype,\"filter\",null);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{initial as s}from\"../../../core/reactiveUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as a}from\"../../../core/sql/WhereClause.js\";import\"../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import o from\"../../../layers/support/FeatureFilter.js\";import{fixFields as u,unpackFieldNames as d,populateMissingFields as p}from\"../../../layers/support/fieldUtils.js\";import h from\"../../../rest/support/Query.js\";import{BuildingSublayerView3DMixin as y}from\"./BuildingSublayerView3D.js\";import{I3SMeshView3D as c}from\"./I3SMeshView3D.js\";import{ForAllFeaturesMode as f}from\"./II3SMeshView3D.js\";import{applyFilterMode as g}from\"./i3s/BuildingFilterUtil.js\";import{createGetFeatureExtent as m}from\"./i3s/I3SGeometryUtil.js\";import{I3SMeshViewFilter as b}from\"./i3s/I3SMeshViewFilter.js\";import{I3SQueryEngine as F}from\"./i3s/I3SQueryEngine.js\";import{I3SQueryFeatureAdapter as _}from\"./i3s/I3SQueryFeatureAdapter.js\";import{I3SQueryFeatureStore as E}from\"./i3s/I3SQueryFeatureStore.js\";import{findFieldsCaseInsensitive as w,getIndexCrs as x}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as S}from\"./support/DefinitionExpressionSceneLayerView.js\";import j from\"../../layers/BuildingComponentSublayerView.js\";import{hasPopupTemplate as v,getRequiredFields as I,getFetchPopupTemplate as Q}from\"../../layers/support/popupUtils.js\";import{TaskPriority as q}from\"../../support/Scheduler.js\";let R=class extends(S(c(y(j)))){constructor(){super(...arguments),this.type=\"building-component-sublayer-3d\",this.layerView=null,this._elevationContext=\"scene\",this._isIntegratedMesh=!1,this._supportsLabeling=!1,this.requiredFields=[],this.progressiveLoadFactor=1,this._queryEngine=null}get i3slayer(){return this.sublayer}get layerUid(){return this.sublayer.layer.uid}get sublayerUid(){return this.sublayer.uid}get layerId(){return this.sublayer.layer.id}get sublayerId(){return this.sublayer.id}get layerPopupEnabledAndHasTemplate(){return this.sublayer.popupEnabled&&v(this.sublayer,this.layerView?.view.popup?.defaultPopupTemplateEnabled)}initialize(){this._updatingHandles.add((()=>[this.sublayer.renderer,this.definitionExpressionFields,this.filterExpressionFields]),(()=>this._updateRequiredFields())),this._updatingHandles.add((()=>this.sublayer.renderer),(e=>this._rendererChange(e)),s);const e=()=>this._filterChange();this._updatingHandles.add((()=>this.parsedDefinitionExpression),e),this._updatingHandles.add((()=>null!=this._filter?this._filter.sortedObjectIds:null),e),this._updatingHandles.add((()=>null!=this._filter?this._filter.parsedWhereClause:null),e),this._updatingHandles.add((()=>[null!=this._filter?this._filter.parsedGeometry:null,null!=this.filter?this.filter.spatialRelationship:null]),(()=>this._geometryFilterChange())),this._updatingHandles.add((()=>this.parsedFilterExpressions),(()=>this._updateSymbologyOverride()),s),this.addResolvingPromise(this._updateRequiredFields())}get lodFactor(){return this.view.qualitySettings.sceneService.object.lodFactor}get parsedFilterExpressions(){return\"Overview\"!==this.sublayer.modelName&&this.layerView?this.layerView.filterExpressions.map((([e,r])=>{let t;try{t=a.create(e,this.sublayer.fieldsIndex)}catch(n){return i.getLogger(this).error(\"Failed to parse filterExpression: \"+n),null}if(!t.isStandardized)return i.getLogger(this).error(\"filterExpression is using non standard function\"),null;const s=[],l=t.fieldNames;return w(l,this.sublayer.fields,{missingFields:s}),s.length>0?(i.getLogger(this).error(`filterExpression references unknown fields: ${s.join(\", \")}`),null):[t,r]})).filter((e=>null!=e)):[]}get filter(){return null!=this._filter?this._filter.viewFilter:null}set filter(e){null!=e&&b.checkSupport(e)?null!=this._filter?this._filter.viewFilter=e:this._filter=new b({viewFilter:e,layerFieldsIndex:this.sublayer.fieldsIndex,loadAsyncModule:e=>this._loadAsyncModule(e),addSqlFilter:(e,r)=>this.addSqlFilter(e,r,this.logError)}):this._filter=null}isUpdating(){return super.isUpdating()||null!=this._filter&&this._filter.updating}_updateSymbologyOverride(){const e=this.parsedFilterExpressions;e.length>0?this._setSymbologyOverride(((r,t)=>{for(const[s,l]of e)try{if(s.testFeature(r))return g(t,l)}catch(i){this.logError(i)}return g(t,null)}),this.filterExpressionFields):this._setSymbologyOverride(null,null)}get filterExpressionFields(){return u(this.sublayer.fieldsIndex,this.parsedFilterExpressions.reduce(((e,[r])=>e.concat(r.fieldNames)),new Array))}get availableFields(){const e=this.sublayer,r=e.fieldsIndex;let t=this.requiredFields;if(e.outFields||e.layer.outFields){const i=[...e.outFields||[],...e.layer.outFields||[]];t=[...d(r,i),...t]}return u(r,t)}_createLayerGraphic(e){const t=new r(null,null,e);return t.layer=this.sublayer.layer,t.sourceLayer=this.sublayer,t}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}async fetchPopupFeatures(e,r){const t=this._validateFetchPopupFeatures(r);if(t)throw t;if(!r?.clientGraphics||0===r.clientGraphics.length)return[];const s=[],l=[],n=null!=this.sublayer.associatedLayer?await this.sublayer.associatedLayer.load():this.sublayer,a=d(this.sublayer.fieldsIndex,await I(n,Q(this.sublayer,r))),o=new Set;for(const i of r.clientGraphics)p(a,i,o)?l.push(i):s.push(i);return 0===l.length?s:(null!=this.sublayer.associatedLayer&&await this.sublayer.associatedLayer.load().catch((()=>i.getLogger(this).warn(\"Failed to load associated feature layer. Displaying popup attributes from cached attributes.\"))),this.whenGraphicAttributes(l,Array.from(o)).catch((()=>l)).then((e=>s.concat(e))))}async _updateRequiredFields(){const e=u(this.sublayer.fieldsIndex,[...this.sublayer.renderer?await this.sublayer.renderer.getRequiredFields(this.sublayer.fieldsIndex):[],...this.definitionExpressionFields||[],...this.filterExpressionFields||[]]);this._set(\"requiredFields\",e)}_validateFetchPopupFeatures(e){const{sublayer:r}=this,{popupEnabled:i}=r;return i?Q(r,e)?void 0:new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{sublayer:r}):new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{sublayer:r})}getFilters(){const e=super.getFilters();return this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),null!=this._filter&&this._filter.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}createQuery(){const e={outFields:[\"*\"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new h(e)}queryExtent(e,r){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),r?.signal)}queryFeatureCount(e,r){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),r?.signal)}queryFeatures(e,r){return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),r?.signal).then((e=>{if(!e?.features)return e;const r=this.sublayer,t=r.layer;for(const i of e.features)i.layer=t,i.sourceLayer=r;return e}))}queryObjectIds(e,r){return this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),r?.signal)}_ensureQueryEngine(){return null==this._queryEngine&&(this._queryEngine=this._createQueryEngine()),this._queryEngine}_createQueryEngine(){const e=m(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new F({layerView:this,priority:q.FEATURE_QUERY_ENGINE,spatialIndex:new E({featureAdapter:new _({objectIdField:this.sublayer.objectIdField,attributeStorageInfo:this.sublayer.attributeStorageInfo,getFeatureExtent:e}),forAllFeatures:(e,r)=>this._forAllFeatures(((r,t,i)=>e({id:r,index:t,meta:i})),r,f.QUERYABLE),getFeatureExtent:e,sourceSpatialReference:x(this.sublayer),viewSpatialReference:this.view.spatialReference})})}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():h.from(e))}};e([l()],R.prototype,\"i3slayer\",null),e([l()],R.prototype,\"layerView\",void 0),e([l()],R.prototype,\"lodFactor\",null),e([l({readOnly:!0})],R.prototype,\"parsedFilterExpressions\",null),e([l({type:o})],R.prototype,\"filter\",null),e([l()],R.prototype,\"_filter\",void 0),e([l({type:[String],readOnly:!0})],R.prototype,\"filterExpressionFields\",null),e([l({type:[String],readOnly:!0})],R.prototype,\"requiredFields\",void 0),e([l({type:[String],readOnly:!0})],R.prototype,\"availableFields\",null),R=e([n(\"esri.views.3d.layers.BuildingComponentSublayerView3D\")],R);const L=R;export{L as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/accessorSupport/extensions/serializableProperty/reader.js\";import\"../../core/Error.js\";import e from\"./LayerView.js\";class s extends e{constructor(r){super(r),this.layer=null,this.sublayerViews=null}highlight(r){throw new Error(\"Not implemented\")}}r([o()],s.prototype,\"layer\",void 0),r([o()],s.prototype,\"sublayerViews\",void 0);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import s from\"../../../core/Accessor.js\";import{groupToMap as t}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Collection.js\";import{handlesGroup as o}from\"../../../core/handleUtils.js\";import n from\"../../../core/Logger.js\";import{abortMaybe as l}from\"../../../core/maybe.js\";import{isAbortError as a,allSettledValues as u,createResolver as p}from\"../../../core/promiseUtils.js\";import{watch as h,syncAndInitial as c}from\"../../../core/reactiveUtils.js\";import{property as y}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../layers/buildingSublayers/BuildingGroupSublayer.js\";import g from\"./BuildingComponentSublayerView3D.js\";import{BuildingSublayerView3DMixin as f}from\"./BuildingSublayerView3D.js\";import{LayerView3D as m}from\"./LayerView3D.js\";import{parseFilterMode as b}from\"./i3s/BuildingFilterUtil.js\";import{checkSpatialReference as w}from\"./i3s/I3SUtil.js\";import{updatingProgress as V}from\"../support/updatingProperties.js\";import j from\"../../layers/BuildingSceneLayerView.js\";const _=f(s);let C=class extends(m(j)){constructor(e){super(e),this.type=\"building-scene-3d\",this.sublayerViews=new i,this._abortController=new AbortController,this._loadingComponents=0,this._pendingWhenSublayerViews=new Map,this.ignoresMemoryFactor=!1}get filterExpression(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null,s=null!=r?r.filterBlocks?.find((e=>\"solid\"===e.filterMode.type)):null;return s?s.filterExpression:null}get filterExpressions(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null;return r?.filterBlocks?r.filterBlocks.toArray().map((e=>[e.filterExpression??\"\",b(e)])):[]}get updatingProgressValue(){const e=this.sublayerViews,r=this._loadingComponents+(e?e.length:0);return e.reduce(((e,r)=>e+r.updatingProgress),0)/r}isUpdating(){return this._loadingComponents>0||this.sublayerViews&&this.sublayerViews.some((e=>e.updating))}initialize(){w(this.layer.spatialReference,this.view.spatialReference,this.view.viewingMode),this._initializeSubLayerViews(this.layer.sublayers,this)}destroy(){this.sublayerViews&&(this.sublayerViews.forEach((e=>e.destroy())),this.sublayerViews=null),this._abortController=l(this._abortController)}_initializeSubLayerViews(e,r){const s=this,t=this.view;e.forEach((e=>{if(!e.isEmpty)if(\"building-group\"===e.type){const s=new _({sublayer:e,view:t,parent:r});this._initializeSubLayerViews(e.sublayers,s)}else\"mesh\"===e.geometryType&&(this._loadingComponents++,e.load({signal:this._abortController.signal}).then((()=>{const i=new g({sublayer:e,layerView:s,view:t,parent:r});this.sublayerViews.push(i);const o=this._pendingWhenSublayerViews.get(e);if(o){for(const e of o)e.resolve(i);this._pendingWhenSublayerViews.delete(e)}this.addHandles([h((()=>i.updating),(()=>this.notifyChange(\"updating\")),c),h((()=>i.updatingProgress),(()=>this.notifyChange(\"updatingProgressValue\")),c)])})).catch((r=>{a(r)||n.getLogger(this).error(`Error while creating view for sublayer ${e.id}\\nLayer: ${this.layer.url}\\n`,r)})).then((()=>{this._loadingComponents--,this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")})))}))}getGraphicFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getGraphicFromIntersectorTarget(e);return null}async fetchPopupFeatures(e,r){if(!r?.clientGraphics||0===r.clientGraphics.length)return[];const s=t(r.clientGraphics,(e=>e.sourceLayer)),i=[];for(const[t,o]of s){const s=this._findComponent(t);null!=s&&i.push(s.fetchPopupFeatures(e,{...r,clientGraphics:o}))}return(await u(i)).flat()}whenGraphicBounds(e){const r=this._findComponent(e.sourceLayer);return null==r?Promise.reject():r.whenGraphicBounds(e)}getAABBFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getAABBFromIntersectorTarget(e);return null}async whenSublayerView(e){const r=this._findComponent(e);if(null!=r)return r;const s=this._pendingWhenSublayerViews.get(e),t=p();return s?s.push(t):this._pendingWhenSublayerViews.set(e,[t]),t.promise}_findComponent(e){return this.sublayerViews.find((r=>e===r.sublayer))}highlight(e){e instanceof r?e=[e]:e instanceof i&&(e=e.toArray());const s=[];if(Array.isArray(e)&&e.length>0&&e[0]instanceof r){const r=e,t=new Map;for(const e of r){let r=t.get(e.sourceLayer);null==r&&(r=[],t.set(e.sourceLayer,r)),r.push(e)}this.sublayerViews.forEach((e=>{const r=t.get(e.sublayer);r&&s.push(e.highlight(r))}))}return o(s)}get usedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.usedMemory),0)}get unloadedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.unloadedMemory),0)}};e([y()],C.prototype,\"sublayerViews\",void 0),e([y({readOnly:!0})],C.prototype,\"filterExpression\",null),e([y({readOnly:!0})],C.prototype,\"filterExpressions\",null),e([y(V)],C.prototype,\"updatingProgress\",void 0),e([y({readOnly:!0,dependsOn:[]})],C.prototype,\"updatingProgressValue\",null),C=e([d(\"esri.views.3d.layers.BuildingSceneLayerView3D\")],C);const S=C;export{S as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Logger.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=t=>{let p=class extends t{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&e.getLogger(this).error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&e.getLogger(this).error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer?.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return e.getLogger(this).error(\"definitionExpression is using non standard function\"),null;const i=[],s=r.fieldNames;return n(s,this.i3slayer.fields,{missingFields:i}),i.length>0?(e.getLogger(this).error(`definitionExpression references unknown fields: ${i.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return e.getLogger(this).error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return r([i()],p.prototype,\"i3slayer\",void 0),r([i({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([i({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{t as DefinitionExpressionSceneLayerView};\n"],"names":["n","t","u","a","l","type","e","readOnly","json","origins","service","read","source","reader","p","r","o","Array","isArray","map","layerType","c","y","messages","push","s","definition","context","constructor","super","this","listMode","sublayers","loadAll","forEachSublayer","write","prototype","i","sublayersProperty","readSublayers","forEach","d","async","concat","Math","floor","rootIndex","nodesPerPage","rootPage","query","f","token","responseType","signal","data","pageSize","lodMetric","lodSelectionMetricType","urlPrefix","warn","split","pop","rootNode","pageError","nodeError","url","EventedMixin","sublayer","parent","view","initialize","suspended","canResume","updating","isUpdating","visible","_this$sublayer","_overrideIfSome","fullOpacity","_this$sublayer2","_this$parent","opacity","_this$parent2","_this$view","ready","Boolean","Solid","WireFrame","XRay","filterMode","mode","edgeMaterial","edges","color","pickable","colorMixMode","Replace","castShadows","lastMaterial","cachedMaterial","arguments","availableFields","filter","Error","queryFeatures","queryObjectIds","queryFeatureCount","createQuery","queryExtent","highlight","R","S","j","layerView","_elevationContext","_isIntegratedMesh","_supportsLabeling","requiredFields","progressiveLoadFactor","_queryEngine","i3slayer","layerUid","layer","uid","sublayerUid","layerId","id","sublayerId","layerPopupEnabledAndHasTemplate","_this$layerView","popupEnabled","v","popup","defaultPopupTemplateEnabled","_updatingHandles","add","renderer","definitionExpressionFields","filterExpressionFields","_updateRequiredFields","_rendererChange","_filterChange","parsedDefinitionExpression","_filter","sortedObjectIds","parsedWhereClause","parsedGeometry","spatialRelationship","_geometryFilterChange","parsedFilterExpressions","_updateSymbologyOverride","addResolvingPromise","lodFactor","qualitySettings","sceneService","object","modelName","filterExpressions","_ref","create","fieldsIndex","getLogger","error","isStandardized","fieldNames","w","fields","missingFields","length","join","viewFilter","b","checkSupport","layerFieldsIndex","loadAsyncModule","_loadAsyncModule","addSqlFilter","logError","_setSymbologyOverride","testFeature","g","reduce","_ref2","outFields","_createLayerGraphic","sourceLayer","_controller","rootNodeVisible","fetchPopupFeatures","_validateFetchPopupFeatures","clientGraphics","associatedLayer","load","I","Q","Set","catch","whenGraphicAttributes","from","then","getRequiredFields","_set","getFilters","addFilters","crsIndex","_collection","returnGeometry","outSpatialReference","spatialReference","h","_ensureQueryEngine","executeQueryForExtent","_ensureQuery","executeQueryForCount","executeQuery","features","executeQueryForIds","_createQueryEngine","m","renderSpatialReference","F","priority","q","FEATURE_QUERY_ENGINE","spatialIndex","E","featureAdapter","_","objectIdField","attributeStorageInfo","getFeatureExtent","forAllFeatures","_forAllFeatures","index","meta","QUERYABLE","sourceSpatialReference","x","viewSpatialReference","_addDefinitionExpressionToQuery","String","L","sublayerViews","C","_abortController","AbortController","_loadingComponents","_pendingWhenSublayerViews","Map","ignoresMemoryFactor","filterExpression","_r$filterBlocks","activeFilterId","filters","find","filterBlocks","toArray","_e$filterExpression","updatingProgressValue","updatingProgress","some","viewingMode","_initializeSubLayerViews","destroy","isEmpty","geometryType","get","resolve","delete","addHandles","notifyChange","getGraphicFromIntersectorTarget","items","_findComponent","flat","whenGraphicBounds","Promise","reject","getAABBFromIntersectorTarget","whenSublayerView","set","promise","usedMemory","unloadedMemory","V","dependsOn","_definitionExpressionErrors","_maxDefinitionExpressionErrors","_this$i3slayer","definitionExpression","_evaluateClause","clone","where"],"sourceRoot":""}