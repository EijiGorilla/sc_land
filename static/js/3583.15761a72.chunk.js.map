{"version":3,"file":"static/js/3583.15761a72.chunk.js","mappings":"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","sources":["components/StructureChart.tsx"],"sourcesContent":["import { useEffect, useRef, useState, memo } from 'react';\r\nimport { structureLayer } from '../layers';\r\nimport { view } from '../Scene';\r\nimport FeatureFilter from '@arcgis/core/layers/support/FeatureFilter';\r\nimport Query from '@arcgis/core/rest/support/Query';\r\nimport * as am5 from '@amcharts/amcharts5';\r\nimport * as am5percent from '@amcharts/amcharts5/percent';\r\nimport am5themes_Animated from '@amcharts/amcharts5/themes/Animated';\r\nimport am5themes_Responsive from '@amcharts/amcharts5/themes/Responsive';\r\nimport {\r\n  generateStrucMoaData,\r\n  generateStrucNumber,\r\n  generateStructureData,\r\n  thousands_separators,\r\n} from '../Query';\r\nimport { CalciteLabel } from '@esri/calcite-components-react';\r\nimport {\r\n  barangayField,\r\n  municipalityField,\r\n  structureStatusField,\r\n  structureStatusQuery,\r\n  valueLabelColor,\r\n} from '../StatusUniqueValues';\r\nimport { useDropdownContext } from './DropdownContext';\r\n\r\n// Dispose function\r\nfunction maybeDisposeRoot(divId: any) {\r\n  am5.array.each(am5.registry.rootElements, function (root) {\r\n    if (root.dom.id === divId) {\r\n      root.dispose();\r\n    }\r\n  });\r\n}\r\n\r\n///*** Others */\r\n\r\n/// Draw chart\r\nconst StructureChart = memo(() => {\r\n  const { municipality, barangays } = useDropdownContext();\r\n\r\n  const municipal = municipality === null ? undefined : municipality.field1;\r\n  const barangay = barangays === null ? undefined : barangays.name;\r\n\r\n  // 1. Structure\r\n  const pieSeriesRef = useRef<unknown | any | undefined>({});\r\n  const legendRef = useRef<unknown | any | undefined>({});\r\n  const chartRef = useRef<unknown | any | undefined>({});\r\n  const [structureData, setStructureData] = useState([\r\n    {\r\n      category: String,\r\n      value: Number,\r\n      sliceSettings: {\r\n        fill: am5.color('#00c5ff'),\r\n      },\r\n    },\r\n  ]);\r\n\r\n  const chartID = 'structure-chart';\r\n  const [structureNumber, setStructureNumber] = useState([]);\r\n\r\n  // 2.Mode of Acquisition\r\n  const barSeriesRef = useRef<unknown | any | undefined>({});\r\n  const yAxisRef = useRef<unknown | any | undefined>({});\r\n  const chartRef_moa = useRef<unknown | any | undefined>({});\r\n  const [structureMoaData, setStructureMoaData] = useState([\r\n    {\r\n      category: String,\r\n      value: Number,\r\n    },\r\n  ]);\r\n  const chartID_moa = 'structure-moa';\r\n\r\n  // Query\r\n  const queryMunicipality = `${municipalityField} = '` + municipal + \"'\";\r\n  const queryBarangay = `${barangayField} = '` + barangay + \"'\";\r\n  const queryMunicipalBarangay = queryMunicipality + ' AND ' + queryBarangay;\r\n\r\n  if (!municipal) {\r\n    structureLayer.definitionExpression = '1=1';\r\n  } else if (municipal && !barangay) {\r\n    structureLayer.definitionExpression = queryMunicipality;\r\n  } else {\r\n    structureLayer.definitionExpression = queryMunicipalBarangay;\r\n  }\r\n\r\n  useEffect(() => {\r\n    generateStructureData(municipal, barangay).then((result: any) => {\r\n      setStructureData(result);\r\n    });\r\n\r\n    // Structure Number\r\n    generateStrucNumber().then((response: any) => {\r\n      setStructureNumber(response);\r\n    });\r\n\r\n    generateStrucMoaData(municipal, barangay).then((response: any) => {\r\n      setStructureMoaData(response);\r\n    });\r\n  }, [municipal, barangay]);\r\n\r\n  useEffect(() => {\r\n    // Dispose previously created root element\r\n\r\n    maybeDisposeRoot(chartID);\r\n\r\n    var root = am5.Root.new(chartID);\r\n    root.container.children.clear();\r\n    root._logo?.dispose();\r\n\r\n    // Set themesf\r\n    // https://www.amcharts.com/docs/v5/concepts/themes/\r\n    root.setThemes([am5themes_Animated.new(root), am5themes_Responsive.new(root)]);\r\n\r\n    // Create chart\r\n    // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/\r\n    var chart = root.container.children.push(\r\n      am5percent.PieChart.new(root, {\r\n        layout: root.verticalLayout,\r\n      }),\r\n    );\r\n    chartRef.current = chart;\r\n\r\n    // Create series\r\n    // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/#Series\r\n    var pieSeries = chart.series.push(\r\n      am5percent.PieSeries.new(root, {\r\n        name: 'Series',\r\n        categoryField: 'category',\r\n        valueField: 'value',\r\n        //legendLabelText: \"[{fill}]{category}[/]\",\r\n        legendValueText: \"{valuePercentTotal.formatNumber('#.')}% ({value})\",\r\n        radius: am5.percent(45), // outer radius\r\n        innerRadius: am5.percent(28),\r\n        scale: 1.8,\r\n      }),\r\n    );\r\n    pieSeriesRef.current = pieSeries;\r\n    chart.series.push(pieSeries);\r\n\r\n    // values inside a donut\r\n    let inner_label = pieSeries.children.push(\r\n      am5.Label.new(root, {\r\n        text: '[#ffffff]{valueSum}[/]\\n[fontSize: 0.5em; #d3d3d3; verticalAlign: super]STRUCTURES[/]',\r\n        fontSize: '1.5em',\r\n        centerX: am5.percent(50),\r\n        centerY: am5.percent(40),\r\n        populateText: true,\r\n        oversizedBehavior: 'fit',\r\n        textAlign: 'center',\r\n      }),\r\n    );\r\n\r\n    pieSeries.onPrivate('width', (width: any) => {\r\n      inner_label.set('maxWidth', width * 0.7);\r\n    });\r\n\r\n    // Set slice opacity and stroke color\r\n    pieSeries.slices.template.setAll({\r\n      fillOpacity: 0.9,\r\n      stroke: am5.color('#ffffff'),\r\n      strokeWidth: 0.5,\r\n      strokeOpacity: 1,\r\n      templateField: 'sliceSettings',\r\n      toggleKey: 'none',\r\n    });\r\n\r\n    // Disabling labels and ticksll\r\n    pieSeries.labels.template.set('visible', false);\r\n    pieSeries.ticks.template.set('visible', false);\r\n\r\n    // EventDispatcher is disposed at SpriteEventDispatcher...\r\n    // It looks like this error results from clicking events\r\n    pieSeries.slices.template.events.on('click', (ev) => {\r\n      const selected: any = ev.target.dataItem?.dataContext;\r\n      const categorySelect: string = selected.category;\r\n      const find = structureStatusQuery.find((emp: any) => emp.category === categorySelect);\r\n      const statusSelect = find?.value;\r\n\r\n      var highlightSelect: any;\r\n      var query = structureLayer.createQuery();\r\n\r\n      view.when(function () {\r\n        view.whenLayerView(structureLayer).then((layerView): any => {\r\n          //chartLayerView = layerView;\r\n\r\n          structureLayer.queryFeatures(query).then(function (results) {\r\n            const RESULT_LENGTH = results.features;\r\n            const ROW_N = RESULT_LENGTH.length;\r\n\r\n            let objID = [];\r\n            for (var i = 0; i < ROW_N; i++) {\r\n              var obj = results.features[i].attributes.OBJECTID;\r\n              objID.push(obj);\r\n            }\r\n\r\n            var queryExt = new Query({\r\n              objectIds: objID,\r\n            });\r\n\r\n            structureLayer.queryExtent(queryExt).then(function (result) {\r\n              if (result.extent) {\r\n                view.goTo(result.extent);\r\n              }\r\n            });\r\n\r\n            if (highlightSelect) {\r\n              highlightSelect.remove();\r\n            }\r\n            highlightSelect = layerView.highlight(objID);\r\n\r\n            view.on('click', function () {\r\n              layerView.filter = new FeatureFilter({\r\n                where: undefined,\r\n              });\r\n              highlightSelect.remove();\r\n            });\r\n          }); // End of queryFeatures\r\n\r\n          layerView.filter = new FeatureFilter({\r\n            where: structureStatusField + ' = ' + statusSelect,\r\n          });\r\n        }); // End of view.whenLayerView\r\n      }); // End of view.whenv\r\n    });\r\n\r\n    pieSeries.data.setAll(structureData);\r\n\r\n    // Legend\r\n    // https://www.amcharts.com/docs/v5/charts/percent-charts/legend-percent-series/\r\n    var legend = chart.children.push(\r\n      am5.Legend.new(root, {\r\n        centerX: am5.percent(50),\r\n        x: am5.percent(50),\r\n        scale: 0.9,\r\n      }),\r\n    );\r\n    legendRef.current = legend;\r\n    legend.data.setAll(pieSeries.dataItems);\r\n\r\n    // Change the size of legend markers\r\n    legend.markers.template.setAll({\r\n      width: 18,\r\n      height: 18,\r\n    });\r\n\r\n    // Change the marker shape\r\n    legend.markerRectangles.template.setAll({\r\n      cornerRadiusTL: 10,\r\n      cornerRadiusTR: 10,\r\n      cornerRadiusBL: 10,\r\n      cornerRadiusBR: 10,\r\n    });\r\n\r\n    // Responsive legend\r\n    // https://www.amcharts.com/docs/v5/tutorials/pie-chart-with-a-legend-with-dynamically-sized-labels/\r\n    // This aligns Legend to Left\r\n    chart.onPrivate('width', function (width: any) {\r\n      const boxWidth = 220; //props.style.width;\r\n      var availableSpace = Math.max(width - chart.height() - boxWidth, boxWidth);\r\n      //var availableSpace = (boxWidth - valueLabelsWidth) * 0.7\r\n      legend.labels.template.setAll({\r\n        width: availableSpace,\r\n        maxWidth: availableSpace,\r\n      });\r\n    });\r\n\r\n    // To align legend items: valueLabels right, labels to left\r\n    // 1. fix width of valueLabels\r\n    // 2. dynamically change width of labels by screen size\r\n\r\n    const valueLabelsWidth = 50;\r\n\r\n    // Change legend labelling properties\r\n    // To have responsive font size, do not set font size\r\n    legend.labels.template.setAll({\r\n      oversizedBehavior: 'truncate',\r\n      fill: am5.color('#ffffff'),\r\n      //textDecoration: \"underline\"\r\n      //width: am5.percent(200)\r\n      //fontWeight: \"300\"\r\n    });\r\n\r\n    legend.valueLabels.template.setAll({\r\n      textAlign: 'right',\r\n      width: valueLabelsWidth,\r\n      fill: am5.color('#ffffff'),\r\n      //fontSize: LEGEND_FONT_SIZE,\r\n    });\r\n\r\n    legend.itemContainers.template.setAll({\r\n      // set space between legend items\r\n      paddingTop: 3,\r\n      paddingBottom: 1,\r\n    });\r\n\r\n    pieSeries.appear(1000, 100);\r\n\r\n    return () => {\r\n      root.dispose();\r\n    };\r\n  }, [chartID, structureData]);\r\n\r\n  useEffect(() => {\r\n    pieSeriesRef.current?.data.setAll(structureData);\r\n    legendRef.current?.data.setAll(pieSeriesRef.current.dataItems);\r\n  });\r\n\r\n  // Mode of Acquisition\r\n  // useEffect(() => {\r\n  //   // Dispose previously created root element\r\n  //   maybeDisposeRoot(chartID_moa);\r\n\r\n  //   var root = am5.Root.new(chartID_moa);\r\n  //   root.container.children.clear();\r\n  //   root._logo?.dispose();\r\n\r\n  //   // Set themesf\r\n  //   // https://www.amcharts.com/docs/v5/concepts/themes/\r\n  //   root.setThemes([am5themes_Animated.new(root), am5themes_Responsive.new(root)]);\r\n\r\n  //   // Create chart\r\n  //   // https://www.amcharts.com/docs/v5/charts/xy-chart/\r\n  //   var chart = root.container.children.push(\r\n  //     am5xy.XYChart.new(root, {\r\n  //       panX: false,\r\n  //       panY: false,\r\n  //       wheelX: 'none',\r\n  //       wheelY: 'none',\r\n  //       paddingLeft: 0,\r\n  //       marginTop: 20,\r\n  //       //height: am5.percent(81),\r\n  //     }),\r\n  //   );\r\n  //   chartRef_moa.current = chart;\r\n\r\n  //   // Create axes\r\n  //   // https://www.amcharts.com/docs/v5/charts/xy-chart/axes/\r\n  //   var yRenderer = am5xy.AxisRendererY.new(root, {\r\n  //     minGridDistance: 5,\r\n  //     strokeOpacity: 1,\r\n  //     strokeWidth: 1,\r\n  //     inversed: true,\r\n  //     stroke: am5.color('#ffffff'),\r\n  //   });\r\n  //   yRenderer.grid.template.set('location', 1);\r\n\r\n  //   var yAxis = chart.yAxes.push(\r\n  //     am5xy.CategoryAxis.new(root, {\r\n  //       maxDeviation: 0,\r\n  //       categoryField: 'category',\r\n  //       renderer: yRenderer,\r\n  //     }),\r\n  //   );\r\n\r\n  //   // Remove grid lines\r\n  //   yAxis.get('renderer').grid.template.set('forceHidden', true);\r\n\r\n  //   var xAxis = chart.xAxes.push(\r\n  //     am5xy.ValueAxis.new(root, {\r\n  //       maxDeviation: 0,\r\n  //       min: 0,\r\n  //       strictMinMax: true,\r\n  //       calculateTotals: true,\r\n  //       renderer: am5xy.AxisRendererX.new(root, {\r\n  //         visible: true,\r\n  //         strokeOpacity: 1,\r\n  //         strokeWidth: 1,\r\n  //         stroke: am5.color('#ffffff'),\r\n  //       }),\r\n  //     }),\r\n  //   );\r\n  //   // Remove grid lines\r\n  //   xAxis.get('renderer').grid.template.set('forceHidden', true);\r\n\r\n  //   // Label properties for yAxis (category axis)\r\n  //   yAxis.get('renderer').labels.template.setAll({\r\n  //     //oversizedBehavior: \"wrap\",\r\n  //     textAlign: 'center',\r\n  //     fill: am5.color('#ffffff'),\r\n  //     //maxWidth: 150,\r\n  //     fontSize: 12,\r\n  //   });\r\n\r\n  //   xAxis.get('renderer').labels.template.setAll({\r\n  //     fill: am5.color('#ffffff'),\r\n  //     fontSize: 10,\r\n  //   });\r\n\r\n  //   // Create series\r\n  //   // https://www.amcharts.com/docs/v5/charts/xy-chart/series/\r\n  //   var series = chart.series.push(\r\n  //     am5xy.ColumnSeries.new(root, {\r\n  //       name: 'Series 1',\r\n  //       xAxis: xAxis,\r\n  //       yAxis: yAxis,\r\n  //       valueXField: 'value',\r\n  //       sequencedInterpolation: true,\r\n  //       categoryYField: 'category',\r\n  //     }),\r\n  //   );\r\n  //   barSeriesRef.current = series;\r\n  //   chart.series.push(series);\r\n\r\n  //   var columnTemplate = series.columns.template;\r\n\r\n  //   columnTemplate.setAll({\r\n  //     draggable: true,\r\n  //     cursorOverStyle: 'pointer',\r\n  //     tooltipText: '{value}',\r\n  //     cornerRadiusBR: 10,\r\n  //     cornerRadiusTR: 10,\r\n  //     strokeOpacity: 0,\r\n  //   });\r\n\r\n  //   // Add Label bullet\r\n  //   series.bullets.push(function () {\r\n  //     return am5.Bullet.new(root, {\r\n  //       locationY: 1,\r\n  //       sprite: am5.Label.new(root, {\r\n  //         text: '{value}',\r\n  //         fill: root.interfaceColors.get('alternativeText'),\r\n  //         centerY: 8,\r\n  //         centerX: am5.p50,\r\n  //         fontSize: 13,\r\n  //         populateText: true,\r\n  //       }),\r\n  //     });\r\n  //   });\r\n\r\n  //   // Use different color by column\r\n  //   /*\r\n  //   columnTemplate.adapters.add('fill', (fill, target) => {\r\n  //     return chart.get('colors').getIndex(series.columns.indexOf(target));\r\n  //   });\r\n\r\n  //   columnTemplate.adapters.add('stroke', (stroke, target) => {\r\n  //     return chart.get('colors').getIndex(series.columns.indexOf(target));\r\n  //   });\r\n  //   */\r\n\r\n  //   series.columns.template.events.on('click', function (ev) {\r\n  //     const selected: any = ev.target.dataItem?.dataContext;\r\n  //     const categorySelect: string = selected.category;\r\n  //     const find = structureMoaQuery.find((emp: any) => emp.category === categorySelect);\r\n  //     const statusSelect = find?.value;\r\n\r\n  //     var highlightSelect: any;\r\n\r\n  //     var query = structureLayer.createQuery();\r\n  //     view.whenLayerView(structureLayer).then(function (layerView) {\r\n  //       //CHART_ELEMENT.style.visibility = \"visible\";\r\n\r\n  //       structureLayer.queryFeatures(query).then(function (results) {\r\n  //         const RESULT_LENGTH = results.features;\r\n  //         const ROW_N = RESULT_LENGTH.length;\r\n\r\n  //         let objID = [];\r\n  //         for (var i = 0; i < ROW_N; i++) {\r\n  //           var obj = results.features[i].attributes.OBJECTID;\r\n  //           objID.push(obj);\r\n  //         }\r\n\r\n  //         var queryExt = new Query({\r\n  //           objectIds: objID,\r\n  //         });\r\n\r\n  //         structureLayer.queryExtent(queryExt).then(function (result) {\r\n  //           if (result.extent) {\r\n  //             view.goTo(result.extent);\r\n  //           }\r\n  //         });\r\n\r\n  //         if (highlightSelect) {\r\n  //           highlightSelect.remove();\r\n  //         }\r\n  //         highlightSelect = layerView.highlight(objID);\r\n\r\n  //         view.on('click', function () {\r\n  //           layerView.filter = new FeatureFilter({\r\n  //             where: undefined,\r\n  //           });\r\n  //           highlightSelect.remove();\r\n  //         });\r\n  //       });\r\n  //       layerView.filter = new FeatureFilter({\r\n  //         where: structureMoaField + ' = ' + statusSelect,\r\n  //       });\r\n  //     }); // End of whenLayerView\r\n  //   });\r\n\r\n  //   yAxisRef.current = yAxis;\r\n  //   yAxis.data.setAll(structureMoaData);\r\n  //   series.data.setAll(structureMoaData);\r\n\r\n  //   // Make stuff animate on load\r\n  //   // https://www.amcharts.com/docs/v5/concepts/animations/\r\n  //   series.appear(1000);\r\n  //   chart.appear(1000, 100);\r\n\r\n  //   return () => {\r\n  //     root.dispose();\r\n  //   };\r\n  // }, [chartID_moa, structureMoaData]);\r\n\r\n  // useEffect(() => {\r\n  //   barSeriesRef.current?.data.setAll(structureMoaData);\r\n  //   yAxisRef.current?.data.setAll(structureMoaData);\r\n  // });\r\n\r\n  return (\r\n    <>\r\n      <CalciteLabel>TOTAL STRUCTURES</CalciteLabel>\r\n      <CalciteLabel layout=\"inline\">\r\n        <b className=\"totalLotsNumber\" style={{ color: valueLabelColor }}>\r\n          {thousands_separators(structureNumber[2])}\r\n          <img\r\n            src=\"https://EijiGorilla.github.io/Symbols/House_Logo.svg\"\r\n            alt=\"Structure Logo\"\r\n            height={'30%'}\r\n            width={'30%'}\r\n            style={{\r\n              marginLeft: '120%',\r\n              display: 'flex',\r\n              marginTop: '-22%',\r\n            }}\r\n          />\r\n        </b>\r\n      </CalciteLabel>\r\n\r\n      {/* Structure Chart */}\r\n      <div\r\n        id={chartID}\r\n        style={{\r\n          height: '47vh',\r\n          backgroundColor: 'rgb(0,0,0,0)',\r\n          color: 'white',\r\n          marginBottom: '7%',\r\n        }}\r\n      ></div>\r\n\r\n      {/* Permit-to-Enter */}\r\n      <CalciteLabel>PERMIT-TO-ENTER</CalciteLabel>\r\n      <CalciteLabel layout=\"inline\">\r\n        {structureNumber[1] === 0 ? (\r\n          <b className=\"permitToEnterNumber\" style={{ color: valueLabelColor }}>\r\n            {structureNumber[0]}% (0)\r\n            <img\r\n              src=\"https://EijiGorilla.github.io/Symbols/Permit-To-Enter.png\"\r\n              alt=\"Structure Logo\"\r\n              height={'18%'}\r\n              width={'18%'}\r\n              style={{ marginLeft: '70%', display: 'flex', marginTop: '-10%' }}\r\n            />\r\n          </b>\r\n        ) : (\r\n          <b className=\"permitToEnterNumber\" style={{ color: valueLabelColor }}>\r\n            {structureNumber[0]}% ({thousands_separators(structureNumber[1])})\r\n            <img\r\n              src=\"https://EijiGorilla.github.io/Symbols/Permit-To-Enter.png\"\r\n              alt=\"Structure Logo\"\r\n              height={'18%'}\r\n              width={'18%'}\r\n              style={{ marginLeft: '70%', display: 'flex', marginTop: '-10%' }}\r\n            />\r\n          </b>\r\n        )}\r\n      </CalciteLabel>\r\n\r\n      {/* <CalciteLabel>MODE OF ACQUISITION</CalciteLabel> */}\r\n      {/* <div\r\n        id={chartID_moa}\r\n        style={{\r\n          height: '21vh',\r\n          backgroundColor: 'rgb(0,0,0,0)',\r\n          color: 'white',\r\n          marginTop: '-3%',\r\n        }}\r\n      ></div> */}\r\n    </>\r\n  );\r\n}); // End of lotChartgs\r\n\r\nexport default StructureChart;\r\n"],"names":["memo","municipality","barangays","useDropdownContext","municipal","undefined","field1","barangay","name","pieSeriesRef","useRef","legendRef","chartRef","structureData","setStructureData","useState","category","String","value","Number","sliceSettings","fill","am5","chartID","structureNumber","setStructureNumber","structureMoaData","setStructureMoaData","queryMunicipality","municipalityField","queryMunicipalBarangay","barangayField","structureLayer","definitionExpression","useEffect","generateStructureData","then","result","generateStrucNumber","response","generateStrucMoaData","_root$_logo","divId","rootElements","root","dom","id","dispose","new","container","children","clear","_logo","setThemes","am5themes_Animated","am5themes_Responsive","chart","push","am5percent","layout","verticalLayout","current","pieSeries","series","categoryField","valueField","legendValueText","radius","innerRadius","scale","inner_label","text","fontSize","centerX","centerY","populateText","oversizedBehavior","textAlign","onPrivate","width","set","slices","template","setAll","fillOpacity","stroke","strokeWidth","strokeOpacity","templateField","toggleKey","labels","ticks","events","on","ev","_ev$target$dataItem","categorySelect","target","dataItem","dataContext","find","structureStatusQuery","emp","statusSelect","highlightSelect","query","createQuery","view","when","whenLayerView","layerView","queryFeatures","results","ROW_N","features","length","objID","i","obj","attributes","OBJECTID","queryExt","Query","objectIds","queryExtent","extent","goTo","remove","highlight","filter","FeatureFilter","where","structureStatusField","data","legend","x","dataItems","markers","height","markerRectangles","cornerRadiusTL","cornerRadiusTR","cornerRadiusBL","cornerRadiusBR","availableSpace","Math","max","maxWidth","valueLabels","itemContainers","paddingTop","paddingBottom","appear","_pieSeriesRef$current","_legendRef$current","_jsxs","_Fragment","_jsx","CalciteLabel","className","style","color","valueLabelColor","thousands_separators","src","alt","marginLeft","display","marginTop","backgroundColor","marginBottom"],"sourceRoot":""}